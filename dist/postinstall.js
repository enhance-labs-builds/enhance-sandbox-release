const _0x3f0af6=_0x3eab;(function(_0x48e4e1,_0x56cabb){const _0x25a708=_0x3eab,_0x4356b1=_0x48e4e1();while(!![]){try{const _0x55f1a2=parseInt(_0x25a708(0x1c1))/0x1+parseInt(_0x25a708(0x1d0))/0x2*(parseInt(_0x25a708(0x1de))/0x3)+parseInt(_0x25a708(0x1dd))/0x4*(parseInt(_0x25a708(0x1d8))/0x5)+parseInt(_0x25a708(0x1fa))/0x6+parseInt(_0x25a708(0x1e8))/0x7*(-parseInt(_0x25a708(0x1d5))/0x8)+-parseInt(_0x25a708(0x1ff))/0x9+parseInt(_0x25a708(0x1ee))/0xa*(-parseInt(_0x25a708(0x1eb))/0xb);if(_0x55f1a2===_0x56cabb)break;else _0x4356b1['push'](_0x4356b1['shift']());}catch(_0x571d73){_0x4356b1['push'](_0x4356b1['shift']());}}}(_0x5b91,0xbab16));import{relative,resolve}from'path';function _0x3eab(_0x542201,_0x46c676){const _0x5b91ec=_0x5b91();return _0x3eab=function(_0x3eab3d,_0x471604){_0x3eab3d=_0x3eab3d-0x1b6;let _0x41b5e8=_0x5b91ec[_0x3eab3d];return _0x41b5e8;},_0x3eab(_0x542201,_0x46c676);}import{promises as _0x105c1a}from'fs';import{join}from'path';var CONFIG_FILENAME='enhance.config.json';async function loadEnhanceConfig(_0x5ee500=process['cwd']()){const _0x3d3572=_0x3eab,_0x2e5a6b=join(_0x5ee500,CONFIG_FILENAME);let _0x7e7bff;try{_0x7e7bff=await _0x105c1a['readFile'](_0x2e5a6b,_0x3d3572(0x1c0));}catch(_0x3b8afe){if(_0x3b8afe[_0x3d3572(0x1e9)]==='ENOENT')return null;throw new Error(_0x3d3572(0x1ca)+CONFIG_FILENAME+':\x20'+_0x3b8afe[_0x3d3572(0x1cc)]);}let _0x514581;try{_0x514581=JSON[_0x3d3572(0x1db)](_0x7e7bff);}catch(_0xb7f702){throw new Error(_0x3d3572(0x1d3)+CONFIG_FILENAME+':\x20'+_0xb7f702['message']);}if(!_0x514581||typeof _0x514581!=='object')throw new Error(CONFIG_FILENAME+'\x20must\x20contain\x20an\x20object');const {publicDir:_0xa66b2c,swFilename:_0x15936b}=_0x514581;if(typeof _0xa66b2c!==_0x3d3572(0x1c5)||_0xa66b2c[_0x3d3572(0x1f1)]()[_0x3d3572(0x1c3)]===0x0)throw new Error(CONFIG_FILENAME+_0x3d3572(0x1df));if(_0x15936b!=null&&(typeof _0x15936b!==_0x3d3572(0x1c5)||_0x15936b[_0x3d3572(0x1f1)]()[_0x3d3572(0x1c3)]===0x0))throw new Error(CONFIG_FILENAME+_0x3d3572(0x1c6));return{'publicDir':_0xa66b2c[_0x3d3572(0x1f1)](),'swFilename':typeof _0x15936b===_0x3d3572(0x1c5)?_0x15936b['trim']():void 0x0};}import{promises as _0x2a79cd}from'fs';import{createHash}from'crypto';import{dirname,join as _0xdbc77c}from'path';import{fileURLToPath}from'url';var package_default={'name':'@enhance-eng/sandbox','version':_0x3f0af6(0x1dc),'type':_0x3f0af6(0x1cd),'description':_0x3f0af6(0x1cb),'license':'MIT','main':_0x3f0af6(0x1f2),'module':'./dist/index.js','types':_0x3f0af6(0x1f4),'exports':{'.':{'types':_0x3f0af6(0x1f4),'import':'./dist/index.js','require':_0x3f0af6(0x1f2)},'./vite':{'types':_0x3f0af6(0x1e0),'import':_0x3f0af6(0x1c9)}},'files':[_0x3f0af6(0x1bc),_0x3f0af6(0x1f0),'enhance.config.sample.json'],'bin':{'enhance-sandbox':_0x3f0af6(0x1d2)},'scripts':{'typecheck':_0x3f0af6(0x1d6),'dev':'ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup\x20--watch','dev:build':'ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup','dev:staging':_0x3f0af6(0x1f9),'dev:staging:build':_0x3f0af6(0x1e5),'build':_0x3f0af6(0x1c4),'build:release':_0x3f0af6(0x1e4),'version':'pnpm\x20version\x20patch\x20--no-git-tag-version'},'dependencies':{'commander':_0x3f0af6(0x1e1),'zod':'^3.22.4'},'devDependencies':{'@types/node':_0x3f0af6(0x200),'javascript-obfuscator':'^4.1.1','tsup':_0x3f0af6(0x1c2),'vite':_0x3f0af6(0x1d1)},'publishConfig':{'access':'public'}},DEFAULT_SERVICE_WORKER_PATH=_0x3f0af6(0x1ba),DEFAULT_RUNTIME_PATH='/assets/enhance-runtime.js',DIST_SERVICE_WORKER_PATH=_0x3f0af6(0x1e6),DIST_RUNTIME_PATH=_0x3f0af6(0x1bd),PACKAGE_VERSION=typeof package_default['version']==='string'?package_default[_0x3f0af6(0x1fc)]:_0x3f0af6(0x1fb);function normalizeAssetPath(_0x16693b){const _0x486035=_0x3f0af6;if(!_0x16693b)return _0x16693b;if(_0x16693b[_0x486035(0x1e3)](_0x486035(0x1fe))||_0x16693b[_0x486035(0x1e3)](_0x486035(0x1f6)))return _0x16693b;const _0x3bf163=_0x16693b[_0x486035(0x1bf)](/^\.\//,'');return _0x3bf163[_0x486035(0x1e3)]('/')?_0x3bf163:'/'+_0x3bf163;}var distDir=dirname(fileURLToPath(new URL(_0x3f0af6(0x1d4),import.meta[_0x3f0af6(0x1cf)])));async function syncAssets(_0x3b66a5){const _0x2e2466=_0x3f0af6,_0x1b17e8=[{'sourcePath':DIST_SERVICE_WORKER_PATH,'manifestPath':normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),'override':_0x3b66a5[_0x2e2466(0x1e2)]?'./'+_0x3b66a5['swFilename']:void 0x0},{'sourcePath':DIST_RUNTIME_PATH,'manifestPath':normalizeAssetPath(DEFAULT_RUNTIME_PATH)}],_0x40db8b=[];for(const _0x1c3963 of _0x1b17e8){const _0x164565=cleanRelativePath(_0x1c3963[_0x2e2466(0x1b7)]??_0x1c3963['manifestPath']),_0x377953=_0xdbc77c(distDir,cleanRelativePath(_0x1c3963['sourcePath'])),_0x1b0abb=_0xdbc77c(_0x3b66a5[_0x2e2466(0x1da)],_0x164565),[_0x15f454,_0x502bc9]=await Promise[_0x2e2466(0x1b9)]([readDigest(_0x377953),readDigest(_0x1b0abb)]);if(_0x15f454&&_0x502bc9&&_0x15f454===_0x502bc9){_0x40db8b['push']({'sourcePath':_0x377953,'destinationPath':_0x1b0abb,'relativeDestination':_0x164565,'status':_0x2e2466(0x1c7)});continue;}await _0x2a79cd[_0x2e2466(0x1ef)](dirname(_0x1b0abb),{'recursive':!![]}),await _0x2a79cd['copyFile'](_0x377953,_0x1b0abb),_0x40db8b['push']({'sourcePath':_0x377953,'destinationPath':_0x1b0abb,'relativeDestination':_0x164565,'status':'copied'});}return _0x40db8b;}function cleanRelativePath(_0x456fb6){const _0x5be8f0=_0x3f0af6;return _0x456fb6[_0x5be8f0(0x1bf)](/^[./]+/,'');}async function readDigest(_0x49c23e){const _0x58aee0=_0x3f0af6;try{const _0x40547d=await _0x2a79cd[_0x58aee0(0x1e7)](_0x49c23e);return createHash(_0x58aee0(0x1d9))['update'](_0x40547d)[_0x58aee0(0x1f3)](_0x58aee0(0x1be));}catch(_0x5503b9){if(_0x5503b9['code']===_0x58aee0(0x1ed))return null;throw _0x5503b9;}}async function main(){const _0x277951=_0x3f0af6,_0xef1dc3=await loadEnhanceConfig();if(!_0xef1dc3){console[_0x277951(0x1d7)](_0x277951(0x1bb)+CONFIG_FILENAME+_0x277951(0x1ec));return;}const _0xf40daa=resolve(process[_0x277951(0x1b6)](),_0xef1dc3[_0x277951(0x1da)]),_0x18c55e=await syncAssets({'publicDir':_0xf40daa,'swFilename':_0xef1dc3[_0x277951(0x1e2)]});for(const _0x4f0e4b of _0x18c55e){const _0x477af7=relative(process[_0x277951(0x1b6)](),_0x4f0e4b[_0x277951(0x1ea)]);_0x4f0e4b[_0x277951(0x1c8)]==='skipped'?console['info']('[enhance-sandbox]\x20Skipped\x20'+_0x4f0e4b[_0x277951(0x1ce)]+_0x277951(0x1f7)+_0x477af7+']'):console['info']('[enhance-sandbox]\x20Copied\x20'+_0x4f0e4b[_0x277951(0x1ce)]+_0x277951(0x1f8)+_0x477af7);}}main()[_0x3f0af6(0x1f5)](_0x286ba4=>{const _0x1e41c2=_0x3f0af6;console[_0x1e41c2(0x1fd)]('[enhance-sandbox]\x20Failed\x20to\x20sync\x20assets\x20during\x20postinstall'),console[_0x1e41c2(0x1fd)](_0x286ba4),process[_0x1e41c2(0x1b8)](0x1);});function _0x5b91(){const _0xdd71b2=['1357636SkUCOE','3sgMQmI','\x20is\x20missing\x20a\x20non-empty\x20\x22publicDir\x22\x20string','./dist/vite/index.d.ts','^11.1.0','swFilename','startsWith','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20OBFUSCATE=1\x20RELEASE=1\x20tsup','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup','sw-enhance.js','readFile','2100826ePOYSp','code','destinationPath','132ehDMzB','\x20not\x20found;\x20skipping\x20asset\x20sync','ENOENT','1536180hatVBv','mkdir','bin','trim','./dist/index.cjs','digest','./dist/index.d.ts','catch','https://','\x20(already\x20current)\x20[','\x20â†’\x20','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup\x20--watch','5204340nqzudt','0.0.0','version','error','http://','5982417Szslwr','^24.10.1','cwd','override','exit','all','/sw-enhance.js','[enhance-sandbox]\x20','dist','assets/enhance-runtime.js','base64','replace','utf8','587601fGBboA','^8.5.1','length','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20tsup','string','\x20has\x20an\x20invalid\x20\x22swFilename\x22;\x20expected\x20a\x20non-empty\x20string','skipped','status','./dist/vite/index.js','Failed\x20to\x20read\x20','Enhance\x20preview\x20bootstrap\x20and\x20tooling\x20package.','message','module','relativeDestination','url','1520628GFmLov','^7.2.4','bin/enhance-sandbox.js','Invalid\x20JSON\x20in\x20','../dist/index.js','8ovIdoF','tsc\x20--noEmit','info','20rcvMwJ','sha256','publicDir','parse','0.3.18'];_0x5b91=function(){return _0xdd71b2;};return _0x5b91();}