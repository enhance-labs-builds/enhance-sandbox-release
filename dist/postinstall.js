const _0x2d66e6=_0x613f;(function(_0x411beb,_0x357c0b){const _0x4ecdc4=_0x613f,_0x417335=_0x411beb();while(!![]){try{const _0x328a0d=-parseInt(_0x4ecdc4(0x1c9))/0x1*(-parseInt(_0x4ecdc4(0x1b3))/0x2)+parseInt(_0x4ecdc4(0x18b))/0x3*(-parseInt(_0x4ecdc4(0x19c))/0x4)+parseInt(_0x4ecdc4(0x1c8))/0x5*(parseInt(_0x4ecdc4(0x1be))/0x6)+-parseInt(_0x4ecdc4(0x1ac))/0x7+parseInt(_0x4ecdc4(0x17e))/0x8*(parseInt(_0x4ecdc4(0x1bf))/0x9)+-parseInt(_0x4ecdc4(0x18e))/0xa*(parseInt(_0x4ecdc4(0x198))/0xb)+parseInt(_0x4ecdc4(0x194))/0xc;if(_0x328a0d===_0x357c0b)break;else _0x417335['push'](_0x417335['shift']());}catch(_0xfc69de){_0x417335['push'](_0x417335['shift']());}}}(_0x4d0c,0x55eb4));import{relative,resolve}from'path';import{promises as _0x29b0d4}from'fs';import{join}from'path';var CONFIG_FILENAME=_0x2d66e6(0x183);async function loadEnhanceConfig(_0x472d39=process[_0x2d66e6(0x1bc)]()){const _0x3cbcd0=_0x2d66e6,_0x368a6e=join(_0x472d39,CONFIG_FILENAME);let _0x2e5edb;try{_0x2e5edb=await _0x29b0d4['readFile'](_0x368a6e,_0x3cbcd0(0x186));}catch(_0x1ea4a8){if(_0x1ea4a8[_0x3cbcd0(0x1b5)]===_0x3cbcd0(0x1a5))return null;throw new Error(_0x3cbcd0(0x19a)+CONFIG_FILENAME+':\x20'+_0x1ea4a8[_0x3cbcd0(0x1b8)]);}let _0x2e8fcb;try{_0x2e8fcb=JSON[_0x3cbcd0(0x1a7)](_0x2e5edb);}catch(_0x3c1547){throw new Error('Invalid\x20JSON\x20in\x20'+CONFIG_FILENAME+':\x20'+_0x3c1547[_0x3cbcd0(0x1b8)]);}if(!_0x2e8fcb||typeof _0x2e8fcb!=='object')throw new Error(CONFIG_FILENAME+_0x3cbcd0(0x17b));const {publicDir:_0x5be12d,swFilename:_0x28e7b0}=_0x2e8fcb;if(typeof _0x5be12d!==_0x3cbcd0(0x182)||_0x5be12d[_0x3cbcd0(0x18c)]()[_0x3cbcd0(0x188)]===0x0)throw new Error(CONFIG_FILENAME+_0x3cbcd0(0x1b7));if(_0x28e7b0!=null&&(typeof _0x28e7b0!==_0x3cbcd0(0x182)||_0x28e7b0['trim']()['length']===0x0))throw new Error(CONFIG_FILENAME+_0x3cbcd0(0x19d));return{'publicDir':_0x5be12d[_0x3cbcd0(0x18c)](),'swFilename':typeof _0x28e7b0===_0x3cbcd0(0x182)?_0x28e7b0['trim']():void 0x0};}import{promises as _0x4b682a}from'fs';import{createHash}from'crypto';function _0x4d0c(){const _0x464820=['ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup\x20--watch','sourcePath','\x20must\x20contain\x20an\x20object','push','\x20(already\x20current)\x20[','16GbqxzE','digest','copyFile','0.0.0','string','enhance.config.json','0.3.19','relativeDestination','utf8','^7.2.4','length','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20OBFUSCATE=1\x20RELEASE=1\x20tsup','startsWith','3GdllwT','trim','override','460EEtleO','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup','copied','module','swFilename','bin/enhance-sandbox.js','2005068JkDJJO','./dist/index.js','publicDir','public','68519OHTexR','enhance.config.sample.json','Failed\x20to\x20read\x20','readFile','2637604cdRiVR','\x20has\x20an\x20invalid\x20\x22swFilename\x22;\x20expected\x20a\x20non-empty\x20string','bin','catch','./dist/index.d.ts','info','error','^11.1.0','assets/enhance-runtime.js','ENOENT','version','parse','tsc\x20--noEmit','https://','./dist/vite/index.js','^8.5.1','1250557isnZdQ','\x20â†’\x20','pnpm\x20version\x20patch\x20--no-git-tag-version','destinationPath','./dist/vite/index.d.ts','\x20not\x20found;\x20skipping\x20asset\x20sync','/sw-enhance.js','40kXCnQO','url','code','manifestPath','\x20is\x20missing\x20a\x20non-empty\x20\x22publicDir\x22\x20string','message','skipped','mkdir','replace','cwd','[enhance-sandbox]\x20','66sZOKIA','2997603zQiobS','base64','[enhance-sandbox]\x20Skipped\x20','[enhance-sandbox]\x20Copied\x20','[enhance-sandbox]\x20Failed\x20to\x20sync\x20assets\x20during\x20postinstall','/assets/enhance-runtime.js','Enhance\x20preview\x20bootstrap\x20and\x20tooling\x20package.','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20tsup','../dist/index.js','74785QcVBwK','23938ENRFBn','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup\x20--watch'];_0x4d0c=function(){return _0x464820;};return _0x4d0c();}import{dirname,join as _0x562b7c}from'path';import{fileURLToPath}from'url';var package_default={'name':'@enhance-eng/sandbox','version':_0x2d66e6(0x184),'type':_0x2d66e6(0x191),'description':_0x2d66e6(0x1c5),'license':'MIT','main':'./dist/index.cjs','module':_0x2d66e6(0x195),'types':_0x2d66e6(0x1a0),'exports':{'.':{'types':_0x2d66e6(0x1a0),'import':'./dist/index.js','require':'./dist/index.cjs'},'./vite':{'types':_0x2d66e6(0x1b0),'import':_0x2d66e6(0x1aa)}},'files':['dist',_0x2d66e6(0x19e),_0x2d66e6(0x199)],'bin':{'enhance-sandbox':_0x2d66e6(0x193)},'scripts':{'typecheck':_0x2d66e6(0x1a8),'dev':_0x2d66e6(0x1ca),'dev:build':_0x2d66e6(0x18f),'dev:staging':_0x2d66e6(0x1cb),'dev:staging:build':'ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup','build':_0x2d66e6(0x1c6),'build:release':_0x2d66e6(0x189),'version':_0x2d66e6(0x1ae)},'dependencies':{'commander':_0x2d66e6(0x1a3),'zod':'^3.22.4'},'devDependencies':{'@types/node':'^24.10.1','javascript-obfuscator':'^4.1.1','tsup':_0x2d66e6(0x1ab),'vite':_0x2d66e6(0x187)},'publishConfig':{'access':_0x2d66e6(0x197)}},DEFAULT_SERVICE_WORKER_PATH=_0x2d66e6(0x1b2),DEFAULT_RUNTIME_PATH=_0x2d66e6(0x1c4),DIST_SERVICE_WORKER_PATH='sw-enhance.js',DIST_RUNTIME_PATH=_0x2d66e6(0x1a4),PACKAGE_VERSION=typeof package_default['version']===_0x2d66e6(0x182)?package_default[_0x2d66e6(0x1a6)]:_0x2d66e6(0x181);function normalizeAssetPath(_0x2e0722){const _0x380fa9=_0x2d66e6;if(!_0x2e0722)return _0x2e0722;if(_0x2e0722[_0x380fa9(0x18a)]('http://')||_0x2e0722[_0x380fa9(0x18a)](_0x380fa9(0x1a9)))return _0x2e0722;const _0x36fa99=_0x2e0722[_0x380fa9(0x1bb)](/^\.\//,'');return _0x36fa99[_0x380fa9(0x18a)]('/')?_0x36fa99:'/'+_0x36fa99;}function _0x613f(_0x5134bd,_0x14c442){const _0x4d0cc8=_0x4d0c();return _0x613f=function(_0x613fad,_0x233bf8){_0x613fad=_0x613fad-0x17a;let _0x1f3e5a=_0x4d0cc8[_0x613fad];return _0x1f3e5a;},_0x613f(_0x5134bd,_0x14c442);}var distDir=dirname(fileURLToPath(new URL(_0x2d66e6(0x1c7),import.meta[_0x2d66e6(0x1b4)])));async function syncAssets(_0x2ff4ce){const _0x2e93be=_0x2d66e6,_0xaf4742=[{'sourcePath':DIST_SERVICE_WORKER_PATH,'manifestPath':normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),'override':_0x2ff4ce[_0x2e93be(0x192)]?'./'+_0x2ff4ce[_0x2e93be(0x192)]:void 0x0},{'sourcePath':DIST_RUNTIME_PATH,'manifestPath':normalizeAssetPath(DEFAULT_RUNTIME_PATH)}],_0x8a6d80=[];for(const _0x53202f of _0xaf4742){const _0x1ebec8=cleanRelativePath(_0x53202f[_0x2e93be(0x18d)]??_0x53202f[_0x2e93be(0x1b6)]),_0x3d25d5=_0x562b7c(distDir,cleanRelativePath(_0x53202f[_0x2e93be(0x17a)])),_0xc4880=_0x562b7c(_0x2ff4ce[_0x2e93be(0x196)],_0x1ebec8),[_0x3940da,_0x496b84]=await Promise['all']([readDigest(_0x3d25d5),readDigest(_0xc4880)]);if(_0x3940da&&_0x496b84&&_0x3940da===_0x496b84){_0x8a6d80[_0x2e93be(0x17c)]({'sourcePath':_0x3d25d5,'destinationPath':_0xc4880,'relativeDestination':_0x1ebec8,'status':_0x2e93be(0x1b9)});continue;}await _0x4b682a[_0x2e93be(0x1ba)](dirname(_0xc4880),{'recursive':!![]}),await _0x4b682a[_0x2e93be(0x180)](_0x3d25d5,_0xc4880),_0x8a6d80[_0x2e93be(0x17c)]({'sourcePath':_0x3d25d5,'destinationPath':_0xc4880,'relativeDestination':_0x1ebec8,'status':_0x2e93be(0x190)});}return _0x8a6d80;}function cleanRelativePath(_0x120a37){const _0x435878=_0x2d66e6;return _0x120a37[_0x435878(0x1bb)](/^[./]+/,'');}async function readDigest(_0xa3f3f5){const _0xa49522=_0x2d66e6;try{const _0x5f07c1=await _0x4b682a[_0xa49522(0x19b)](_0xa3f3f5);return createHash('sha256')['update'](_0x5f07c1)[_0xa49522(0x17f)](_0xa49522(0x1c0));}catch(_0x42b4e1){if(_0x42b4e1['code']===_0xa49522(0x1a5))return null;throw _0x42b4e1;}}async function main(){const _0x3e1d55=_0x2d66e6,_0x1f0fe1=await loadEnhanceConfig();if(!_0x1f0fe1){console[_0x3e1d55(0x1a1)](_0x3e1d55(0x1bd)+CONFIG_FILENAME+_0x3e1d55(0x1b1));return;}const _0x5dabc6=resolve(process['cwd'](),_0x1f0fe1[_0x3e1d55(0x196)]),_0x53c467=await syncAssets({'publicDir':_0x5dabc6,'swFilename':_0x1f0fe1[_0x3e1d55(0x192)]});for(const _0x2d0804 of _0x53c467){const _0x41c3de=relative(process[_0x3e1d55(0x1bc)](),_0x2d0804[_0x3e1d55(0x1af)]);_0x2d0804['status']===_0x3e1d55(0x1b9)?console['info'](_0x3e1d55(0x1c1)+_0x2d0804[_0x3e1d55(0x185)]+_0x3e1d55(0x17d)+_0x41c3de+']'):console[_0x3e1d55(0x1a1)](_0x3e1d55(0x1c2)+_0x2d0804[_0x3e1d55(0x185)]+_0x3e1d55(0x1ad)+_0x41c3de);}}main()[_0x2d66e6(0x19f)](_0x298189=>{const _0x18d92a=_0x2d66e6;console[_0x18d92a(0x1a2)](_0x18d92a(0x1c3)),console[_0x18d92a(0x1a2)](_0x298189),process['exit'](0x1);});