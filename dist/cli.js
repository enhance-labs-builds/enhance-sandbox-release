#!/usr/bin/env node

const _0x10da16=_0x858b;(function(_0xb8a3b8,_0x14f4c9){const _0x233ddd=_0x858b,_0x3063b1=_0xb8a3b8();while(!![]){try{const _0x1e7f5e=-parseInt(_0x233ddd(0x1a2))/0x1*(-parseInt(_0x233ddd(0x1a6))/0x2)+parseInt(_0x233ddd(0x1c5))/0x3+-parseInt(_0x233ddd(0x1b0))/0x4*(parseInt(_0x233ddd(0x196))/0x5)+parseInt(_0x233ddd(0x1db))/0x6+parseInt(_0x233ddd(0x1e5))/0x7+parseInt(_0x233ddd(0x1eb))/0x8+parseInt(_0x233ddd(0x106))/0x9*(-parseInt(_0x233ddd(0x1ee))/0xa);if(_0x1e7f5e===_0x14f4c9)break;else _0x3063b1['push'](_0x3063b1['shift']());}catch(_0x189801){_0x3063b1['push'](_0x3063b1['shift']());}}}(_0xe4ca,0xbad0f));import{Command}from'commander';import{resolve,relative}from'path';var DEFAULT_OVERLAY_PATH=typeof __ENHANCE_DEFAULT_OVERLAY_PATH__!==_0x10da16(0x17c)?__ENHANCE_DEFAULT_OVERLAY_PATH__:_0x10da16(0x160),DEFAULT_BACKEND_URL=typeof __ENHANCE_DEFAULT_BACKEND_URL__!==_0x10da16(0x17c)?__ENHANCE_DEFAULT_BACKEND_URL__:_0x10da16(0x198),DEFAULT_OVERLAY_HMR=typeof __ENHANCE_OVERLAY_ENABLE_HMR__!==_0x10da16(0x17c)?__ENHANCE_OVERLAY_ENABLE_HMR__:![];console[_0x10da16(0x15f)](_0x10da16(0x1f6),{'overlayPath':DEFAULT_OVERLAY_PATH,'backendUrl':DEFAULT_BACKEND_URL,'overlayHmr':DEFAULT_OVERLAY_HMR});function normalizeOptions(_0x44fa44){const _0x2c1ef3=_0x10da16,_0x52003d=_0x44fa44[_0x2c1ef3(0x101)]??{};return{'callbackBypass':_0x44fa44[_0x2c1ef3(0x11e)],'overlay':{'enabled':!![],'position':_0x2c1ef3(0x1a3),'enableViteHmr':_0x52003d[_0x2c1ef3(0x1e0)]??DEFAULT_OVERLAY_HMR},'logLevel':'info','swPath':_0x2c1ef3(0x185),'overlayPath':_0x52003d[_0x2c1ef3(0x16e)]??DEFAULT_OVERLAY_PATH,'runtimeScriptPath':_0x2c1ef3(0x100),'security':_0x52003d[_0x2c1ef3(0x133)]??_0x2c1ef3(0x1fc),'backendUrl':_0x52003d[_0x2c1ef3(0x1d4)]??DEFAULT_BACKEND_URL};}function _0xe4ca(){const _0x13385a=['enabled','\x20registerServiceWorker()\x20called','Copied\x20','none','\x20detectBlocking\x20error:','Enhance\x20sandbox\x20utility\x20CLI','\x20enhancementUrl:\x20','\x20Calling\x20createOverlay()...','sourcePath','\x20No\x20window\x20object\x20-\x20skipping','\x20Registering\x20SW\x20at\x20','\x20Module\x20exports:','vite:error','sw-enhance.js','searchParams','runtimeURL','--public-dir\x20<path>','\x20Waiting\x20for\x20navigator.serviceWorker.ready...','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20OBFUSCATE=1\x20RELEASE=1\x20tsup','\x20No\x20service\x20worker\x20active\x20to\x20configure','\x20Available\x20exports:','createOverlay','log','https://assets.enhancelabs.ai/overlay.js','\x20Installing\x20React\x20Refresh\x20runtime\x20from\x20','\x20No\x20registration\x20found\x20-\x20nothing\x20to\x20unregister','search','swFilename','^3.22.4','./dist/index.d.ts','relativeDestination','string','\x20Module\x20imported\x20in\x20','__enhanceOptions','vite:beforeUpdate','installing','has','overlayPath','update','__enhanceReactRefreshInstalledOrigins','skipped','sha256','enhancementId','cwd','\x20Raw\x20options:','MIT','status','\x20Service\x20workers\x20NOT\x20supported\x20in\x20this\x20browser','\x20First\x20initialization','\x20Updating\x20overlay...','origin','undefined','\x20Found\x20registration:','__enhanceInitialized','\x20No\x20serviceWorker\x20support\x20-\x20nothing\x20to\x20unregister','\x20enhancementId:\x20','\x20Skipping\x20-\x20not\x20enabled\x20or\x20no\x20options','\x20Setting\x20up\x20remote\x20HMR...','description','\x20Document\x20readyState:\x20','/sw-enhance.js','\x20Page\x20controlled\x20by\x20our\x20SW:\x20','\x20overlayController\x20exists:\x20','swPath','\x20ownsServiceWorker?\x20scriptURL=','[Enhance\x20Runtime]','trim','querySelector','\x20Already\x20initialized\x20(window.__enhanceInitialized=true)\x20-\x20returning\x20existing\x20controller','code','stdout','\x20Failed\x20to\x20register\x20service\x20worker:','\x20swPath:\x20','./dist/vite/index.d.ts','\x20sendConfiguration()\x20called','some','\x20Calling\x20updateOverlay()...','10CWwdKu','object','https://api.enhancelabs.ai','copyFile','[Enhance\x20Overlay]','enhancementUrl','dist','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup','\x20Sending\x20DISABLE\x20message\x20to\x20SW...','push','/@react-refresh',',\x20owns=','1CneAZe','bottom-right','\x20composeOverlayState\x20-\x20enhancementUrl:\x20','\x20Vite\x20client\x20already\x20loaded\x20for\x20','2117606LCXODo','postMessage','injectIntoGlobalHook','N/A','keys','\x20React\x20Refresh\x20already\x20installed\x20for\x20','\x20Enhancement\x20features\x20will\x20NOT\x20work\x20until\x20it\x20is\x20unregistered','\x20Updating\x20overlay\x20with\x20state:','./dist/index.cjs','0.3.18','2918236wIRkWl','option','init','\x20Enhancement\x20detection:\x20wasEnhanced=','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20tsup','\x20Loading\x20Vite\x20HMR\x20client\x20from\x20','startsWith','\x20Checking\x20for\x20blocking\x20service\x20worker...','copied','controller','\x20doLoadOverlay()\x20starting...','\x20Current\x20URL:\x20','\x20state.enabled:\x20','\x20Vite\x20HMR\x20client\x20loaded\x20for\x20','reload','\x20detectBlocking\x20-\x20existing\x20registration:','error','\x20with\x20scope\x20\x27/\x27...','\x20HMR\x20setup\x20complete','toLowerCase','serviceWorkerURL','2551125LyxpxW','enhance','enhance:configure','\x20loadOverlay()\x20failed:','__enhanceOverlay','__viteHMRLoaded','controlled','onToggle','serviceWorker','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup\x20--watch','^11.1.0','url','appError','\x20Starting\x20SW\x20registration\x20(async)...','\x20Overlay\x20controller\x20initialized\x20and\x20cached','backendUrl','\x20composeOverlayState\x20-\x20state.enabled:\x20','$RefreshReg$','bin/enhance-sandbox.js','enhance:disable','mkdir','off','2923446ZsnUhH','\x20No\x20cached\x20controller\x20-\x20will\x20import\x20module','warn','options','\x20Page\x20not\x20enhanced\x20by\x20SW\x20-\x20reloading\x20to\x20apply\x20enhancement','enableOverlayHmr','\x20Unregistering\x20any\x20existing\x20SW...','scope','Copy\x20the\x20service\x20worker\x20and\x20overlay\x20bundle\x20into\x20a\x20public\x20directory','function','110439CTnJMf','\x20Module\x20missing\x20createOverlay\x20export!',',\x20expected=','overlay','public','scriptURL','7598072oCZRqq','location','override','18290IhOoEy','/@vite/client','enable','\x20Enhancement\x20mode\x20ENABLED','readFile','\x20init()\x20called\x20at\x20','title','all','[Enhance\x20Config]\x20Build-time\x20defaults:','\x20Controller\x20created:','publicDir','^7.2.4','history','enableViteHmr','permissive','waiting','includes','err','Print\x20the\x20current\x20asset\x20manifest','now','http://','state:\x20','^24.10.1','Skipped\x20','\x20Starting\x20fresh\x20overlay\x20load...',',\x20page\x20origin:\x20','\x20Load\x20already\x20in\x20progress\x20-\x20waiting...','prepare-sw',',\x20currentOptions:\x20','\x20Config\x20sent\x20to\x20SW','ENOENT','^8.5.1','\x20Starting\x20overlay\x20load\x20(async)...','/assets/enhance-runtime.js','__development','getRegistration','\x20Explicit\x20disable\x20via\x20URL\x20param\x20-\x20exiting','../dist/index.js','unregister','5598qoSXty','\x20unregisterServiceWorker()\x20called','filename','\x20No\x20current\x20controller','hot','add','\x20overlayPath:\x20','\x20resolveWorker:','pnpm\x20version\x20patch\x20--no-git-tag-version','\x20BLOCKING\x20SW\x20detected:\x20','Enhance\x20preview\x20bootstrap\x20and\x20tooling\x20package.','enhancement','$RefreshSig$','\x20SW\x20unregistered\x20successfully','active','\x20Setting\x20up\x20Vite\x20HMR\x20error\x20listeners','./dist/index.js','\x20SW\x20ready!\x20Active:','__vite_plugin_react_preamble_installed__','[Enhance\x20SW-Client]','message','^4.1.1','https://','readyState','callbackBypass','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup','\x20Page\x20was\x20not\x20controlled\x20-\x20SW\x20just\x20activated.\x20Reloading\x20to\x20enable\x20enhancement...','digest','stringify','--filename\x20<name>','tsc\x20--noEmit','ready','default','0.0.0','...','\x20Vite\x20update\x20pending\x20-\x20clearing\x20error','version','sw-enhance','\x20Found\x20cached\x20overlay\x20controller\x20on\x20window.__enhanceOverlay\x20-\x20skipping\x20reinit','enhance-sandbox','command','\x20Failed\x20to\x20import/create\x20overlay:','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup\x20--watch','__enhanceController','\x20loadOverlay()\x20called','security','href','\x20Failed\x20to\x20unregister\x20service\x20worker:','\x20setupRemoteHMR()\x20for\x20','destinationPath','\x20No\x20blocking\x20SW\x20found','hasEnhancement','replaceState','toString','\x20React\x20Refresh\x20runtime\x20installed\x20for\x20','get','\x20Overlay\x20origin:\x20','requiredOption','\x20URL\x20params\x20parsed:','action','enhance.config.sample.json','\x20Same\x20origin\x20-\x20skipping\x20HMR\x20setup','state','\x20enableViteHmr:\x20','disable','module','write'];_0xe4ca=function(){return _0x13385a;};return _0xe4ca();}var state={'enabled':![],'controlled':![],'appError':null};function getEnhancementUrl(){const _0x36748a=_0x10da16;try{const _0x3458cb=new URLSearchParams(window['location'][_0x36748a(0x163)]);return _0x3458cb[_0x36748a(0x13d)](_0x36748a(0x19b))?.[_0x36748a(0x18b)]()||'';}catch{return'';}}var LOG_PREFIX=_0x10da16(0x19a),overlayController=null,overlayLoadPromise=null,toggleHandler=null,currentOptions=null;async function loadOverlay(_0x7db93){const _0x31e64d=_0x10da16;console['log'](LOG_PREFIX+_0x31e64d(0x132)),console['log'](LOG_PREFIX+_0x31e64d(0x10c)+_0x7db93[_0x31e64d(0x16e)]),console[_0x31e64d(0x15f)](LOG_PREFIX+_0x31e64d(0x145)+_0x7db93[_0x31e64d(0x1fb)]),currentOptions=_0x7db93[_0x31e64d(0x1de)],toggleHandler=_0x7db93[_0x31e64d(0x1cc)];if(overlayController){console['log'](LOG_PREFIX+'\x20Controller\x20already\x20exists\x20-\x20updating\x20overlay'),updateOverlay();return;}if(overlayLoadPromise)return console[_0x31e64d(0x15f)](LOG_PREFIX+_0x31e64d(0xf9)),overlayLoadPromise;console[_0x31e64d(0x15f)](LOG_PREFIX+_0x31e64d(0x206)),overlayLoadPromise=doLoadOverlay(_0x7db93);try{await overlayLoadPromise,console['log'](LOG_PREFIX+'\x20loadOverlay()\x20complete');}catch(_0xd274b7){console['error'](LOG_PREFIX+_0x31e64d(0x1c8),_0xd274b7);}finally{overlayLoadPromise=null;}}async function doLoadOverlay(_0x38ba53){const _0x316721=_0x10da16;console['log'](LOG_PREFIX+_0x316721(0x1ba));if(typeof window===_0x316721(0x17c)){console['log'](LOG_PREFIX+_0x316721(0x152));return;}if(window[_0x316721(0x1c9)]){console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x12c)),overlayController=window['__enhanceOverlay'];return;}console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x1dc));try{_0x38ba53[_0x316721(0x1fb)]&&(console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x182)),await setupRemoteHMR(_0x38ba53[_0x316721(0x16e)]));console['log'](LOG_PREFIX+'\x20Importing\x20overlay\x20module\x20from:\x20'+_0x38ba53[_0x316721(0x16e)]);const _0x3358c1=Date['now'](),_0x5a054d=await import(_0x38ba53[_0x316721(0x16e)]);console['log'](LOG_PREFIX+_0x316721(0x169)+(Date[_0x316721(0x201)]()-_0x3358c1)+'ms'),console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x154),Object[_0x316721(0x1aa)](_0x5a054d));if(typeof _0x5a054d?.['createOverlay']!==_0x316721(0x1e4)){console[_0x316721(0x1c0)](LOG_PREFIX+_0x316721(0x1e6)),console[_0x316721(0x1c0)](LOG_PREFIX+_0x316721(0x15d),Object['keys'](_0x5a054d));return;}console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x150));const _0x258a66=_0x5a054d[_0x316721(0x15e)]();console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x1f7),_0x258a66),overlayController=_0x258a66,window[_0x316721(0x1c9)]=_0x258a66,_0x258a66['onToggle'](_0x38ba53[_0x316721(0x1cc)]),console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x1d3)),console[_0x316721(0x15f)](LOG_PREFIX+_0x316721(0x195)),updateOverlay();}catch(_0x4f3e84){console[_0x316721(0x1c0)](LOG_PREFIX+_0x316721(0x12f),_0x4f3e84);}}function updateOverlay(){const _0x3b452a=_0x10da16;console[_0x3b452a(0x15f)](LOG_PREFIX+'\x20updateOverlay()\x20called'),console[_0x3b452a(0x15f)](LOG_PREFIX+_0x3b452a(0x187)+!!overlayController),console['log'](LOG_PREFIX+'\x20currentOptions\x20exists:\x20'+!!currentOptions);if(!overlayController||!currentOptions){console[_0x3b452a(0x15f)](LOG_PREFIX+'\x20Missing\x20controller\x20or\x20options\x20-\x20skipping\x20update');return;}const _0x294b7d=composeOverlayState(currentOptions);console[_0x3b452a(0x15f)](LOG_PREFIX+_0x3b452a(0x1ad),JSON[_0x3b452a(0x122)](_0x294b7d,null,0x2)),overlayController[_0x3b452a(0x16f)](_0x294b7d),console[_0x3b452a(0x15f)](LOG_PREFIX+'\x20Overlay\x20update\x20complete');}function _0x858b(_0x5a4174,_0x33f7f9){const _0xe4ca9b=_0xe4ca();return _0x858b=function(_0x858b42,_0x16ca67){_0x858b42=_0x858b42-0xf8;let _0x4feb92=_0xe4ca9b[_0x858b42];return _0x4feb92;},_0x858b(_0x5a4174,_0x33f7f9);}function composeOverlayState(_0xb978c7){const _0x31ed78=_0x10da16,_0xcaf78b=getEnhancementUrl();return console['log'](LOG_PREFIX+_0x31ed78(0x1a4)+_0xcaf78b),console[_0x31ed78(0x15f)](LOG_PREFIX+_0x31ed78(0x1d5)+state[_0x31ed78(0x149)]),console[_0x31ed78(0x15f)](LOG_PREFIX+'\x20composeOverlayState\x20-\x20state.controlled:\x20'+state['controlled']),{'enhancementUrl':_0xcaf78b,'enabled':state[_0x31ed78(0x149)],'controlled':state[_0x31ed78(0x1cb)],'overlayPosition':_0xb978c7[_0x31ed78(0x1e8)]['position'],'securityMode':_0xb978c7['security'],'backendBaseUrl':_0xb978c7[_0x31ed78(0x1d4)],'appError':state['appError']};}async function setupRemoteHMR(_0x3d2fa1){const _0x5e47f4=_0x10da16;console[_0x5e47f4(0x15f)](LOG_PREFIX+_0x5e47f4(0x136)+_0x3d2fa1);if(typeof window==='undefined')return;try{const _0x2b7335=new URL(_0x3d2fa1,window[_0x5e47f4(0x1ec)][_0x5e47f4(0x17b)]),_0x19da91=_0x2b7335['origin'];console[_0x5e47f4(0x15f)](LOG_PREFIX+_0x5e47f4(0x13e)+_0x19da91+_0x5e47f4(0xf8)+window[_0x5e47f4(0x1ec)][_0x5e47f4(0x17b)]);if(_0x19da91===window['location']['origin']){console[_0x5e47f4(0x15f)](LOG_PREFIX+_0x5e47f4(0x143));return;}console['log'](LOG_PREFIX+'\x20Cross-origin\x20overlay\x20-\x20setting\x20up\x20HMR...'),await ensureReactRefreshPreamble(_0x19da91),await ensureViteClient(_0x19da91),console['log'](LOG_PREFIX+_0x5e47f4(0x1c2));}catch(_0x16be7b){console[_0x5e47f4(0x1dd)](LOG_PREFIX+'\x20Failed\x20to\x20prepare\x20remote\x20HMR\x20(non-fatal):',_0x16be7b);}}async function ensureReactRefreshPreamble(_0x26eb28){const _0xa812a8=_0x10da16;window[_0xa812a8(0x170)]??=new Set();if(window[_0xa812a8(0x170)][_0xa812a8(0x16d)](_0x26eb28)){console['log'](LOG_PREFIX+_0xa812a8(0x1ab)+_0x26eb28);return;}console[_0xa812a8(0x15f)](LOG_PREFIX+_0xa812a8(0x161)+_0x26eb28+'...');const _0xde6f2=await import(_0x26eb28+_0xa812a8(0x1a0)),_0x5f5af7=_0xde6f2&&typeof _0xde6f2===_0xa812a8(0x197)&&_0xa812a8(0x126)in _0xde6f2?_0xde6f2[_0xa812a8(0x126)]:_0xde6f2;if(!isRefreshRuntime(_0x5f5af7)){console['warn'](LOG_PREFIX+'\x20Invalid\x20React\x20Refresh\x20runtime');return;}_0x5f5af7[_0xa812a8(0x1a8)](window),window[_0xa812a8(0x1d6)]=()=>{},window[_0xa812a8(0x112)]=()=>_0x4187e8=>_0x4187e8,window[_0xa812a8(0x118)]=!![],window['__enhanceReactRefreshInstalledOrigins'][_0xa812a8(0x10b)](_0x26eb28),console[_0xa812a8(0x15f)](LOG_PREFIX+_0xa812a8(0x13c)+_0x26eb28);}async function ensureViteClient(_0x33c82e){const _0x34ee56=_0x10da16;window[_0x34ee56(0x1ca)]??=new Set();if(window[_0x34ee56(0x1ca)][_0x34ee56(0x16d)](_0x33c82e)){console[_0x34ee56(0x15f)](LOG_PREFIX+_0x34ee56(0x1a5)+_0x33c82e);return;}console[_0x34ee56(0x15f)](LOG_PREFIX+_0x34ee56(0x1b5)+_0x33c82e+_0x34ee56(0x128)),await import(_0x33c82e+_0x34ee56(0x1ef)),window[_0x34ee56(0x1ca)]['add'](_0x33c82e),console[_0x34ee56(0x15f)](LOG_PREFIX+_0x34ee56(0x1bd)+_0x33c82e);}function isRefreshRuntime(_0x16ac40){const _0x50b0f3=_0x10da16;return typeof _0x16ac40===_0x50b0f3(0x197)&&_0x16ac40!==null&&'injectIntoGlobalHook'in _0x16ac40&&typeof _0x16ac40[_0x50b0f3(0x1a8)]===_0x50b0f3(0x1e4);}var WORKER_MESSAGE_CONFIG=_0x10da16(0x1c7),WORKER_MESSAGE_DISABLE=_0x10da16(0x1d8),LOG_PREFIX2=_0x10da16(0x119),registration=null,currentOptions2=null;async function registerServiceWorker(_0x2b705c){const _0x4f6a75=_0x10da16;console['log'](LOG_PREFIX2+_0x4f6a75(0x14a)),console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x191)+_0x2b705c['swPath']);if(!(_0x4f6a75(0x1cd)in navigator)){console[_0x4f6a75(0x1dd)](LOG_PREFIX2+_0x4f6a75(0x178));return;}console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Service\x20workers\x20supported');const _0x12a482=navigator['serviceWorker']['controller'];console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Current\x20controller:',_0x12a482?.[_0x4f6a75(0x1ea)]??_0x4f6a75(0x14c)),console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Controller\x20state:',_0x12a482?.[_0x4f6a75(0x144)]??'N/A');const _0x77ab39=!!_0x12a482;currentOptions2=_0x2b705c,console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x1b7));const _0x34931b=await detectBlockingServiceWorker(_0x2b705c[_0x4f6a75(0x188)]);if(_0x34931b){console['error'](LOG_PREFIX2+_0x4f6a75(0x10f)+_0x34931b),console[_0x4f6a75(0x1c0)](LOG_PREFIX2+_0x4f6a75(0x1ac));return;}console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x138));try{console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x153)+_0x2b705c[_0x4f6a75(0x188)]+_0x4f6a75(0x1c1)),registration=await navigator['serviceWorker']['register'](_0x2b705c[_0x4f6a75(0x188)],{'scope':'/'}),console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Registration\x20returned:',{'scope':registration[_0x4f6a75(0x1e2)],'active':registration[_0x4f6a75(0x114)]?.[_0x4f6a75(0x1ea)],'waiting':registration[_0x4f6a75(0x1fd)]?.[_0x4f6a75(0x1ea)],'installing':registration[_0x4f6a75(0x16c)]?.[_0x4f6a75(0x1ea)]}),console['log'](LOG_PREFIX2+_0x4f6a75(0x15a));const _0x38c662=await navigator[_0x4f6a75(0x1cd)][_0x4f6a75(0x125)];console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x117),_0x38c662['active']?.[_0x4f6a75(0x1ea)]);const _0x32d26a=ownsCurrentController(_0x2b705c[_0x4f6a75(0x188)]);state[_0x4f6a75(0x1cb)]=_0x32d26a,console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x186)+_0x32d26a),console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Current\x20controller\x20after\x20ready:',navigator['serviceWorker'][_0x4f6a75(0x1b9)]?.['scriptURL']??_0x4f6a75(0x14c));if(!_0x77ab39&&!navigator['serviceWorker'][_0x4f6a75(0x1b9)]){console['log'](LOG_PREFIX2+_0x4f6a75(0x120)),window[_0x4f6a75(0x1ec)]['reload']();return;}console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20Sending\x20customer\x20configuration...'),await sendConfiguration();if(state[_0x4f6a75(0x149)]){const _0x1aa6c0=document[_0x4f6a75(0x18c)]('[data-enhance-runtime-bootstrap]')!==null;console[_0x4f6a75(0x15f)](LOG_PREFIX2+_0x4f6a75(0x1b3)+_0x1aa6c0);if(!_0x1aa6c0){console['log'](LOG_PREFIX2+_0x4f6a75(0x1df)),window[_0x4f6a75(0x1ec)][_0x4f6a75(0x1be)]();return;}}console['log'](LOG_PREFIX2+_0x4f6a75(0x17a)),updateOverlay(),console[_0x4f6a75(0x15f)](LOG_PREFIX2+'\x20registerServiceWorker()\x20complete');}catch(_0x197278){console['error'](LOG_PREFIX2+_0x4f6a75(0x190),_0x197278);}}async function sendConfiguration(){const _0x290e80=_0x10da16;console[_0x290e80(0x15f)](LOG_PREFIX2+_0x290e80(0x193)),console['log'](LOG_PREFIX2+_0x290e80(0x1bc)+state[_0x290e80(0x149)]+_0x290e80(0xfb)+!!currentOptions2);if(!state[_0x290e80(0x149)]||!currentOptions2){console[_0x290e80(0x15f)](LOG_PREFIX2+_0x290e80(0x181));return;}const _0x8e8bf1=await resolveWorker();if(!_0x8e8bf1){console['warn'](LOG_PREFIX2+_0x290e80(0x15c));return;}const _0x3a1a69={'callbackBypass':currentOptions2['callbackBypass'],'securityMode':currentOptions2[_0x290e80(0x133)]};console[_0x290e80(0x15f)](LOG_PREFIX2+'\x20Sending\x20customer\x20config\x20to\x20SW:',JSON['stringify'](_0x3a1a69,null,0x2)),_0x8e8bf1[_0x290e80(0x1a7)]({'type':WORKER_MESSAGE_CONFIG,'config':_0x3a1a69}),console[_0x290e80(0x15f)](LOG_PREFIX2+_0x290e80(0xfc));}async function unregisterServiceWorker(_0x52d445){const _0xc30e33=_0x10da16;console[_0xc30e33(0x15f)](LOG_PREFIX2+_0xc30e33(0x107));if(!('serviceWorker'in navigator)){console[_0xc30e33(0x15f)](LOG_PREFIX2+_0xc30e33(0x17f));return;}try{const _0x422495=registration??await navigator[_0xc30e33(0x1cd)][_0xc30e33(0x102)]('/');if(!_0x422495){console['log'](LOG_PREFIX2+_0xc30e33(0x162));return;}console[_0xc30e33(0x15f)](LOG_PREFIX2+_0xc30e33(0x17d),{'scope':_0x422495[_0xc30e33(0x1e2)],'active':_0x422495[_0xc30e33(0x114)]?.[_0xc30e33(0x1ea)],'waiting':_0x422495['waiting']?.['scriptURL'],'installing':_0x422495['installing']?.[_0xc30e33(0x1ea)]});const _0x4763ad=[_0x422495['active']?.['scriptURL'],_0x422495[_0xc30e33(0x1fd)]?.['scriptURL'],_0x422495[_0xc30e33(0x16c)]?.[_0xc30e33(0x1ea)]],_0x11b239=_0x4763ad[_0xc30e33(0x194)](_0x577aae=>_0x577aae&&ownsServiceWorker(_0x577aae,_0x52d445));if(!_0x11b239){console[_0xc30e33(0x15f)](LOG_PREFIX2+'\x20Registration\x20is\x20not\x20ours\x20-\x20not\x20unregistering');return;}_0x422495[_0xc30e33(0x114)]&&(console[_0xc30e33(0x15f)](LOG_PREFIX2+_0xc30e33(0x19e)),_0x422495[_0xc30e33(0x114)][_0xc30e33(0x1a7)]({'type':WORKER_MESSAGE_DISABLE})),console['log'](LOG_PREFIX2+'\x20Unregistering\x20SW...'),await _0x422495[_0xc30e33(0x105)](),registration=null,currentOptions2=null,console[_0xc30e33(0x15f)](LOG_PREFIX2+_0xc30e33(0x113));}catch(_0x1e43d8){console[_0xc30e33(0x1c0)](LOG_PREFIX2+_0xc30e33(0x135),_0x1e43d8);}}function ownsServiceWorker(_0x3109a8,_0x25c65e){const _0x2b184d=_0x10da16,_0x48254b=typeof window!=='undefined'?window[_0x2b184d(0x1ec)][_0x2b184d(0x17b)]:'',_0x5ac730=new URL(_0x25c65e,_0x48254b||void 0x0)[_0x2b184d(0x134)],_0x50f844=_0x3109a8===_0x5ac730||_0x3109a8[_0x2b184d(0x1fe)](_0x2b184d(0x12b));return console[_0x2b184d(0x15f)](LOG_PREFIX2+_0x2b184d(0x189)+_0x3109a8+_0x2b184d(0x1e7)+_0x5ac730+_0x2b184d(0x1a1)+_0x50f844),_0x50f844;}function ownsCurrentController(_0x368f7a){const _0x774f45=_0x10da16;if(typeof navigator===_0x774f45(0x17c))return![];const _0x11c6e3=navigator['serviceWorker']?.['controller'];if(!_0x11c6e3)return console[_0x774f45(0x15f)](LOG_PREFIX2+_0x774f45(0x109)),![];return ownsServiceWorker(_0x11c6e3['scriptURL'],_0x368f7a);}async function detectBlockingServiceWorker(_0x6b273f){const _0x1d921d=_0x10da16;if(!navigator['serviceWorker'])return null;try{const _0x327be9=await navigator[_0x1d921d(0x1cd)][_0x1d921d(0x102)]('/');console[_0x1d921d(0x15f)](LOG_PREFIX2+_0x1d921d(0x1bf),_0x327be9?.[_0x1d921d(0x114)]?.[_0x1d921d(0x1ea)]??_0x1d921d(0x14c));const _0x3ad091=_0x327be9?.[_0x1d921d(0x114)]?.['scriptURL'];if(!_0x3ad091)return null;if(ownsServiceWorker(_0x3ad091,_0x6b273f))return null;return _0x3ad091;}catch(_0x5954d4){return console[_0x1d921d(0x1c0)](LOG_PREFIX2+_0x1d921d(0x14d),_0x5954d4),null;}}async function resolveWorker(){const _0x4a6b73=_0x10da16,_0x20644a=registration??await navigator[_0x4a6b73(0x1cd)]?.[_0x4a6b73(0x102)]('/'),_0x55ca60=_0x20644a?.['active']??_0x20644a?.[_0x4a6b73(0x1fd)]??_0x20644a?.['installing']??null;return console[_0x4a6b73(0x15f)](LOG_PREFIX2+_0x4a6b73(0x10d),_0x55ca60?.[_0x4a6b73(0x1ea)]??'none',_0x4a6b73(0x203)+(_0x55ca60?.['state']??_0x4a6b73(0x1a9))),_0x55ca60;}var LOG_PREFIX3=_0x10da16(0x18a);function isInitialized(){const _0x1c04a9=_0x10da16;return typeof window!=='undefined'&&window[_0x1c04a9(0x17e)]===!![];}function setInitialized(_0x219367){const _0x41292d=_0x10da16;typeof window!==_0x41292d(0x17c)&&(window['__enhanceInitialized']=_0x219367);}function getOptions(){const _0x33daef=_0x10da16;return typeof window!==_0x33daef(0x17c)?window[_0x33daef(0x16a)]??null:null;}function setOptions(_0x4db11a){const _0x436c70=_0x10da16;typeof window!==_0x436c70(0x17c)&&(window[_0x436c70(0x16a)]=_0x4db11a);}var Enhance={'init'(_0x29fe70){const _0x1b6bdb=_0x10da16,_0x5a8116=Date[_0x1b6bdb(0x201)]();console['log'](LOG_PREFIX3+_0x1b6bdb(0x1f3)+_0x5a8116),console['log'](LOG_PREFIX3+_0x1b6bdb(0x1bb)+window[_0x1b6bdb(0x1ec)]['href']),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x184)+document[_0x1b6bdb(0x11d)]),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x175),JSON[_0x1b6bdb(0x122)](_0x29fe70,null,0x2));if(isInitialized())return console[_0x1b6bdb(0x1dd)](LOG_PREFIX3+_0x1b6bdb(0x18d)),window[_0x1b6bdb(0x131)]??createController();setInitialized(!![]),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x179));const _0x3250fe=normalizeOptions(_0x29fe70);setOptions(_0x3250fe),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+'\x20Normalized\x20options:',JSON['stringify'](_0x3250fe,null,0x2));const _0x28e256=parseUrlParams();console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x140),JSON[_0x1b6bdb(0x122)](_0x28e256,null,0x2));if(_0x28e256['explicitDisable'])return cleanUrlParam(_0x1b6bdb(0x1c6)),console['log'](LOG_PREFIX3+_0x1b6bdb(0x103)),createController();if(_0x28e256[_0x1b6bdb(0x139)])return console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x1f1)),console['log'](LOG_PREFIX3+_0x1b6bdb(0x14f)+_0x28e256[_0x1b6bdb(0x19b)]),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x180)+_0x28e256[_0x1b6bdb(0x173)]),state[_0x1b6bdb(0x149)]=!![],console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0xff)),void loadOverlay({'overlayPath':_0x3250fe[_0x1b6bdb(0x16e)],'enableViteHmr':_0x3250fe['overlay'][_0x1b6bdb(0x1fb)],'options':_0x3250fe,'onToggle':handleToggle}),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x1d2)),void registerServiceWorker(_0x3250fe),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+'\x20init()\x20complete\x20-\x20enhancement\x20mode'),createController();return console[_0x1b6bdb(0x15f)](LOG_PREFIX3+'\x20Normal\x20mode\x20-\x20no\x20enhancement\x20params'),console[_0x1b6bdb(0x15f)](LOG_PREFIX3+_0x1b6bdb(0x1e1)),void unregisterServiceWorker(_0x3250fe[_0x1b6bdb(0x188)]),console['log'](LOG_PREFIX3+'\x20init()\x20complete\x20-\x20normal\x20mode'),import.meta['hot']&&(console['log'](LOG_PREFIX3+_0x1b6bdb(0x115)),import.meta[_0x1b6bdb(0x10a)]['on'](_0x1b6bdb(0x155),_0x46ce06=>{const _0x50b039=_0x1b6bdb;console[_0x50b039(0x15f)](LOG_PREFIX3+'\x20Vite\x20error\x20detected:',_0x46ce06),state['appError']={'message':_0x46ce06[_0x50b039(0x1ff)][_0x50b039(0x11a)]},updateOverlay();}),import.meta[_0x1b6bdb(0x10a)]['on'](_0x1b6bdb(0x16b),()=>{const _0x4fcbde=_0x1b6bdb;state[_0x4fcbde(0x1d1)]&&(console['log'](LOG_PREFIX3+_0x4fcbde(0x129)),state['appError']=null,updateOverlay());})),createController();}};function createController(){const _0x3188fa=_0x10da16,_0x5953fa={'enable'(){const _0x5ecee2=_0x858b,_0x584e35=getOptions();if(!_0x584e35)return;state[_0x5ecee2(0x149)]=!![],void loadOverlay({'overlayPath':_0x584e35['overlayPath'],'enableViteHmr':_0x584e35[_0x5ecee2(0x1e8)][_0x5ecee2(0x1fb)],'options':_0x584e35,'onToggle':handleToggle}),void registerServiceWorker(_0x584e35),void sendConfiguration(),updateOverlay();},'disable'(){const _0xb4b6cc=_0x858b,_0x3a8a62=getOptions();if(!_0x3a8a62)return;state[_0xb4b6cc(0x149)]=![],state[_0xb4b6cc(0x1cb)]=![],updateOverlay(),void unregisterServiceWorker(_0x3a8a62[_0xb4b6cc(0x188)]);},'status'(){const _0x2409f2=_0x858b;return{'enabled':state[_0x2409f2(0x149)],'controlled':state[_0x2409f2(0x1cb)]};}};return typeof window!=='undefined'&&(window[_0x3188fa(0x131)]=_0x5953fa),_0x5953fa;}function handleToggle(){const _0x194bee=_0x10da16,_0x375c80=createController();state[_0x194bee(0x149)]?_0x375c80[_0x194bee(0x146)]():_0x375c80[_0x194bee(0x1f0)]();}function parseUrlParams(){const _0x5507f4=_0x10da16,_0x830c5a=new URL(window[_0x5507f4(0x1ec)][_0x5507f4(0x134)]),_0x30c16d=_0x830c5a['searchParams'][_0x5507f4(0x13d)](_0x5507f4(0x1c6))?.[_0x5507f4(0x1c3)](),_0x20925f=_0x830c5a[_0x5507f4(0x157)][_0x5507f4(0x13d)]('enhancementUrl'),_0x331288=_0x830c5a[_0x5507f4(0x157)]['get'](_0x5507f4(0x111));return{'hasEnhancement':Boolean(_0x20925f||_0x331288),'explicitDisable':_0x30c16d==='0'||_0x30c16d==='false'||_0x30c16d===_0x5507f4(0x1da),'enhancementUrl':_0x20925f,'enhancementId':_0x331288};}function cleanUrlParam(_0x4d4087){const _0x43e573=_0x10da16,_0x56102b=new URL(window[_0x43e573(0x1ec)][_0x43e573(0x134)]);_0x56102b['searchParams'][_0x43e573(0x16d)](_0x4d4087)&&(_0x56102b[_0x43e573(0x157)]['delete'](_0x4d4087),window[_0x43e573(0x1fa)][_0x43e573(0x13a)](null,document[_0x43e573(0x1f4)],_0x56102b[_0x43e573(0x13b)]()));}var package_default={'name':'@enhance-eng/sandbox','version':_0x10da16(0x1af),'type':_0x10da16(0x147),'description':_0x10da16(0x110),'license':_0x10da16(0x176),'main':_0x10da16(0x1ae),'module':_0x10da16(0x116),'types':_0x10da16(0x166),'exports':{'.':{'types':_0x10da16(0x166),'import':'./dist/index.js','require':_0x10da16(0x1ae)},'./vite':{'types':_0x10da16(0x192),'import':'./dist/vite/index.js'}},'files':[_0x10da16(0x19c),'bin',_0x10da16(0x142)],'bin':{'enhance-sandbox':_0x10da16(0x1d7)},'scripts':{'typecheck':_0x10da16(0x124),'dev':_0x10da16(0x1ce),'dev:build':_0x10da16(0x11f),'dev:staging':_0x10da16(0x130),'dev:staging:build':_0x10da16(0x19d),'build':_0x10da16(0x1b4),'build:release':_0x10da16(0x15b),'version':_0x10da16(0x10e)},'dependencies':{'commander':_0x10da16(0x1cf),'zod':_0x10da16(0x165)},'devDependencies':{'@types/node':_0x10da16(0x204),'javascript-obfuscator':_0x10da16(0x11b),'tsup':_0x10da16(0xfe),'vite':_0x10da16(0x1f9)},'publishConfig':{'access':_0x10da16(0x1e9)}},DEFAULT_SERVICE_WORKER_PATH=_0x10da16(0x185),DEFAULT_RUNTIME_PATH=_0x10da16(0x100),DIST_SERVICE_WORKER_PATH=_0x10da16(0x156),DIST_RUNTIME_PATH='assets/enhance-runtime.js',PACKAGE_VERSION=typeof package_default[_0x10da16(0x12a)]===_0x10da16(0x168)?package_default[_0x10da16(0x12a)]:_0x10da16(0x127);function normalizeAssetPath(_0x32b66a){const _0x17a148=_0x10da16;if(!_0x32b66a)return _0x32b66a;if(_0x32b66a[_0x17a148(0x1b6)](_0x17a148(0x202))||_0x32b66a[_0x17a148(0x1b6)](_0x17a148(0x11c)))return _0x32b66a;const _0x30342b=_0x32b66a['replace'](/^\.\//,'');return _0x30342b[_0x17a148(0x1b6)]('/')?_0x30342b:'/'+_0x30342b;}var defaultSwPath=normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),defaultRuntimePath=normalizeAssetPath(DEFAULT_RUNTIME_PATH),Enhance2={'init'(_0x2fc198){const _0x3d3c80=_0x10da16;return Enhance[_0x3d3c80(0x1b2)](_0x2fc198);},'serviceWorkerURL'(){return defaultSwPath;},'runtimeURL'(){return defaultRuntimePath;},'assetManifest'(){return getAssetManifest();}};function getAssetManifest(){return{'version':PACKAGE_VERSION,'serviceWorker':serviceWorkerURL(),'runtime':runtimeURL(),'serviceWorkerDigest':null,'runtimeDigest':null};}function serviceWorkerURL(){const _0x5392ac=_0x10da16;return Enhance2[_0x5392ac(0x1c4)]();}function runtimeURL(){const _0x6a4b9b=_0x10da16;return Enhance2[_0x6a4b9b(0x158)]();}import{promises as _0xfa62d6}from'fs';import{createHash}from'crypto';import{dirname,join}from'path';import{fileURLToPath}from'url';var distDir=dirname(fileURLToPath(new URL(_0x10da16(0x104),import.meta[_0x10da16(0x1d0)])));async function syncAssets(_0x1d6b9f){const _0x5969ac=_0x10da16,_0x13a51c=[{'sourcePath':DIST_SERVICE_WORKER_PATH,'manifestPath':normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),'override':_0x1d6b9f[_0x5969ac(0x164)]?'./'+_0x1d6b9f[_0x5969ac(0x164)]:void 0x0},{'sourcePath':DIST_RUNTIME_PATH,'manifestPath':normalizeAssetPath(DEFAULT_RUNTIME_PATH)}],_0xa61a5=[];for(const _0x57b55a of _0x13a51c){const _0x42b571=cleanRelativePath(_0x57b55a[_0x5969ac(0x1ed)]??_0x57b55a['manifestPath']),_0x2b6452=join(distDir,cleanRelativePath(_0x57b55a[_0x5969ac(0x151)])),_0x478276=join(_0x1d6b9f['publicDir'],_0x42b571),[_0x3a021e,_0x2f0b7c]=await Promise[_0x5969ac(0x1f5)]([readDigest(_0x2b6452),readDigest(_0x478276)]);if(_0x3a021e&&_0x2f0b7c&&_0x3a021e===_0x2f0b7c){_0xa61a5['push']({'sourcePath':_0x2b6452,'destinationPath':_0x478276,'relativeDestination':_0x42b571,'status':_0x5969ac(0x171)});continue;}await _0xfa62d6[_0x5969ac(0x1d9)](dirname(_0x478276),{'recursive':!![]}),await _0xfa62d6[_0x5969ac(0x199)](_0x2b6452,_0x478276),_0xa61a5[_0x5969ac(0x19f)]({'sourcePath':_0x2b6452,'destinationPath':_0x478276,'relativeDestination':_0x42b571,'status':_0x5969ac(0x1b8)});}return _0xa61a5;}function cleanRelativePath(_0x1964c0){return _0x1964c0['replace'](/^[./]+/,'');}async function readDigest(_0x3910fe){const _0xbc7059=_0x10da16;try{const _0xeb437=await _0xfa62d6[_0xbc7059(0x1f2)](_0x3910fe);return createHash(_0xbc7059(0x172))[_0xbc7059(0x16f)](_0xeb437)[_0xbc7059(0x121)]('base64');}catch(_0x5be0ec){if(_0x5be0ec[_0xbc7059(0x18e)]===_0xbc7059(0xfd))return null;throw _0x5be0ec;}}var program=new Command();program['name'](_0x10da16(0x12d))[_0x10da16(0x183)](_0x10da16(0x14e))[_0x10da16(0x12a)](_0x10da16(0x127)),program[_0x10da16(0x12e)]('manifest')[_0x10da16(0x183)](_0x10da16(0x200))[_0x10da16(0x141)](()=>{const _0x65d2f6=_0x10da16,_0x316166=getAssetManifest();process[_0x65d2f6(0x18f)][_0x65d2f6(0x148)](JSON['stringify'](_0x316166,null,0x2)+'\x0a');}),program[_0x10da16(0x12e)](_0x10da16(0xfa))[_0x10da16(0x183)](_0x10da16(0x1e3))[_0x10da16(0x13f)](_0x10da16(0x159),'Directory\x20to\x20copy\x20the\x20service\x20worker\x20into')[_0x10da16(0x1b1)](_0x10da16(0x123),'Override\x20the\x20service\x20worker\x20output\x20filename\x20(defaults\x20to\x20sw-enhance.js)')[_0x10da16(0x141)](async _0x18799f=>{const _0x1a2eca=_0x10da16,_0x1b5b10=resolve(process[_0x1a2eca(0x174)](),_0x18799f[_0x1a2eca(0x1f8)]),_0x189896=await syncAssets({'publicDir':_0x1b5b10,'swFilename':_0x18799f[_0x1a2eca(0x108)]});for(const _0x29ba42 of _0x189896){const _0x105225=relative(process['cwd'](),_0x29ba42[_0x1a2eca(0x137)]);_0x29ba42[_0x1a2eca(0x177)]===_0x1a2eca(0x171)?process[_0x1a2eca(0x18f)][_0x1a2eca(0x148)](_0x1a2eca(0x205)+_0x29ba42[_0x1a2eca(0x167)]+'\x20(already\x20current)\x20['+_0x105225+']\x0a'):process[_0x1a2eca(0x18f)][_0x1a2eca(0x148)](_0x1a2eca(0x14b)+_0x29ba42[_0x1a2eca(0x167)]+'\x20â†’\x20'+_0x105225+'\x0a');}}),program['parseAsync']();