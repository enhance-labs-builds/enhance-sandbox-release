#!/usr/bin/env node

const _0x4dd8b6=_0x2163;(function(_0x1767de,_0x398ead){const _0x3774a5=_0x2163,_0x4a7c9f=_0x1767de();while(!![]){try{const _0xbb3341=parseInt(_0x3774a5(0x217))/0x1+-parseInt(_0x3774a5(0x1e2))/0x2*(-parseInt(_0x3774a5(0x20f))/0x3)+-parseInt(_0x3774a5(0x1ee))/0x4*(parseInt(_0x3774a5(0x28a))/0x5)+parseInt(_0x3774a5(0x285))/0x6+-parseInt(_0x3774a5(0x267))/0x7*(parseInt(_0x3774a5(0x1ff))/0x8)+parseInt(_0x3774a5(0x264))/0x9+parseInt(_0x3774a5(0x22c))/0xa*(-parseInt(_0x3774a5(0x1de))/0xb);if(_0xbb3341===_0x398ead)break;else _0x4a7c9f['push'](_0x4a7c9f['shift']());}catch(_0x79f4f0){_0x4a7c9f['push'](_0x4a7c9f['shift']());}}}(_0x4232,0x468b5));import{Command}from'commander';import{resolve,relative}from'path';var DEFAULT_OVERLAY_PATH=typeof __ENHANCE_DEFAULT_OVERLAY_PATH__!==_0x4dd8b6(0x29a)?__ENHANCE_DEFAULT_OVERLAY_PATH__:_0x4dd8b6(0x1bd),DEFAULT_BACKEND_URL=typeof __ENHANCE_DEFAULT_BACKEND_URL__!==_0x4dd8b6(0x29a)?__ENHANCE_DEFAULT_BACKEND_URL__:'https://api.enhancelabs.ai',DEFAULT_OVERLAY_HMR=typeof __ENHANCE_OVERLAY_ENABLE_HMR__!==_0x4dd8b6(0x29a)?__ENHANCE_OVERLAY_ENABLE_HMR__:![];console[_0x4dd8b6(0x1cf)](_0x4dd8b6(0x1f5),{'overlayPath':DEFAULT_OVERLAY_PATH,'backendUrl':DEFAULT_BACKEND_URL,'overlayHmr':DEFAULT_OVERLAY_HMR});function normalizeOptions(_0x11e6be){const _0xa97834=_0x4dd8b6,_0x3e3a01=_0x11e6be[_0xa97834(0x297)]??{};return{'callbackBypass':_0x11e6be['callbackBypass'],'overlay':{'enabled':!![],'position':_0xa97834(0x24f),'enableViteHmr':_0x3e3a01['enableOverlayHmr']??DEFAULT_OVERLAY_HMR},'logLevel':_0xa97834(0x26e),'swPath':_0xa97834(0x2a1),'overlayPath':_0x3e3a01[_0xa97834(0x278)]??DEFAULT_OVERLAY_PATH,'runtimeScriptPath':_0xa97834(0x1dd),'security':_0x3e3a01[_0xa97834(0x2ae)]??_0xa97834(0x20c),'backendUrl':_0x3e3a01[_0xa97834(0x21c)]??DEFAULT_BACKEND_URL};}var state={'enabled':![],'controlled':![],'appError':null};function getEnhancementUrl(){const _0x1a1a66=_0x4dd8b6;try{const _0x4525a9=new URLSearchParams(window['location']['search']);return _0x4525a9[_0x1a1a66(0x25c)](_0x1a1a66(0x1d9))?.[_0x1a1a66(0x1c5)]()||'';}catch{return'';}}var LOG_PREFIX='[Enhance\x20Overlay]',overlayController=null,overlayLoadPromise=null,toggleHandler=null,currentOptions=null;async function loadOverlay(_0x590aa7){const _0x5b2c03=_0x4dd8b6;console[_0x5b2c03(0x1cf)](LOG_PREFIX+_0x5b2c03(0x2aa)),console['log'](LOG_PREFIX+_0x5b2c03(0x2ac)+_0x590aa7[_0x5b2c03(0x278)]),console['log'](LOG_PREFIX+_0x5b2c03(0x24e)+_0x590aa7[_0x5b2c03(0x21b)]),currentOptions=_0x590aa7[_0x5b2c03(0x200)],toggleHandler=_0x590aa7['onToggle'];if(overlayController){console['log'](LOG_PREFIX+'\x20Controller\x20already\x20exists\x20-\x20updating\x20overlay'),updateOverlay();return;}if(overlayLoadPromise)return console[_0x5b2c03(0x1cf)](LOG_PREFIX+_0x5b2c03(0x255)),overlayLoadPromise;console['log'](LOG_PREFIX+'\x20Starting\x20fresh\x20overlay\x20load...'),overlayLoadPromise=doLoadOverlay(_0x590aa7);try{await overlayLoadPromise,console[_0x5b2c03(0x1cf)](LOG_PREFIX+_0x5b2c03(0x257));}catch(_0x2eceaa){console[_0x5b2c03(0x2a8)](LOG_PREFIX+_0x5b2c03(0x219),_0x2eceaa);}finally{overlayLoadPromise=null;}}async function doLoadOverlay(_0x59bbbe){const _0x56a88a=_0x4dd8b6;console[_0x56a88a(0x1cf)](LOG_PREFIX+'\x20doLoadOverlay()\x20starting...');if(typeof window===_0x56a88a(0x29a)){console[_0x56a88a(0x1cf)](LOG_PREFIX+_0x56a88a(0x1c3));return;}if(window[_0x56a88a(0x276)]){console['log'](LOG_PREFIX+_0x56a88a(0x239)),overlayController=window['__enhanceOverlay'],updateOverlay();return;}console[_0x56a88a(0x1cf)](LOG_PREFIX+_0x56a88a(0x27a));try{_0x59bbbe[_0x56a88a(0x21b)]&&(console['log'](LOG_PREFIX+_0x56a88a(0x266)),await setupRemoteHMR(_0x59bbbe[_0x56a88a(0x278)]));console['log'](LOG_PREFIX+_0x56a88a(0x26d)+_0x59bbbe[_0x56a88a(0x278)]);const _0x2dc25a=Date['now'](),_0x31d50f=await import(_0x59bbbe['overlayPath']);console[_0x56a88a(0x1cf)](LOG_PREFIX+_0x56a88a(0x2b4)+(Date['now']()-_0x2dc25a)+'ms'),console[_0x56a88a(0x1cf)](LOG_PREFIX+'\x20Module\x20exports:',Object['keys'](_0x31d50f));if(typeof _0x31d50f?.[_0x56a88a(0x293)]!=='function'){console[_0x56a88a(0x2a8)](LOG_PREFIX+_0x56a88a(0x265)),console[_0x56a88a(0x2a8)](LOG_PREFIX+_0x56a88a(0x243),Object[_0x56a88a(0x23d)](_0x31d50f));return;}console[_0x56a88a(0x1cf)](LOG_PREFIX+_0x56a88a(0x29c));const _0x570bcf=_0x31d50f[_0x56a88a(0x293)]();console[_0x56a88a(0x1cf)](LOG_PREFIX+'\x20Controller\x20created:',_0x570bcf),overlayController=_0x570bcf,window[_0x56a88a(0x276)]=_0x570bcf,_0x570bcf[_0x56a88a(0x24d)](_0x59bbbe[_0x56a88a(0x24d)]),console['log'](LOG_PREFIX+_0x56a88a(0x272)),console['log'](LOG_PREFIX+_0x56a88a(0x1e5)),updateOverlay();}catch(_0x37e246){console[_0x56a88a(0x2a8)](LOG_PREFIX+_0x56a88a(0x241),_0x37e246);}}function updateOverlay(){const _0x165684=_0x4dd8b6;console[_0x165684(0x1cf)](LOG_PREFIX+'\x20updateOverlay()\x20called'),console[_0x165684(0x1cf)](LOG_PREFIX+'\x20overlayController\x20exists:\x20'+!!overlayController),console[_0x165684(0x1cf)](LOG_PREFIX+_0x165684(0x288)+!!currentOptions);if(!overlayController||!currentOptions){console['log'](LOG_PREFIX+'\x20Missing\x20controller\x20or\x20options\x20-\x20skipping\x20update');return;}const _0x30c389=composeOverlayState(currentOptions);console[_0x165684(0x1cf)](LOG_PREFIX+_0x165684(0x245),JSON['stringify'](_0x30c389,null,0x2)),overlayController['update'](_0x30c389),console[_0x165684(0x1cf)](LOG_PREFIX+_0x165684(0x1e9));}function composeOverlayState(_0x39d7d3){const _0x3c1456=_0x4dd8b6,_0x537a38=getEnhancementUrl();return console[_0x3c1456(0x1cf)](LOG_PREFIX+_0x3c1456(0x1d6)+_0x537a38),console[_0x3c1456(0x1cf)](LOG_PREFIX+_0x3c1456(0x287)+state[_0x3c1456(0x23a)]),console[_0x3c1456(0x1cf)](LOG_PREFIX+_0x3c1456(0x25a)+state[_0x3c1456(0x22a)]),{'enhancementUrl':_0x537a38,'enabled':state['enabled'],'controlled':state[_0x3c1456(0x22a)],'overlayPosition':_0x39d7d3[_0x3c1456(0x1ef)][_0x3c1456(0x28e)],'securityMode':_0x39d7d3[_0x3c1456(0x2ae)],'backendBaseUrl':_0x39d7d3[_0x3c1456(0x21c)],'appError':state[_0x3c1456(0x27b)]};}async function setupRemoteHMR(_0x197cac){const _0x2ab816=_0x4dd8b6;console[_0x2ab816(0x1cf)](LOG_PREFIX+_0x2ab816(0x2af)+_0x197cac);if(typeof window==='undefined')return;try{const _0x5dc883=new URL(_0x197cac,window['location'][_0x2ab816(0x202)]),_0x25229a=_0x5dc883[_0x2ab816(0x202)];console[_0x2ab816(0x1cf)](LOG_PREFIX+_0x2ab816(0x231)+_0x25229a+_0x2ab816(0x1ba)+window[_0x2ab816(0x29f)][_0x2ab816(0x202)]);if(_0x25229a===window[_0x2ab816(0x29f)][_0x2ab816(0x202)]){console['log'](LOG_PREFIX+'\x20Same\x20origin\x20-\x20skipping\x20HMR\x20setup');return;}console[_0x2ab816(0x1cf)](LOG_PREFIX+_0x2ab816(0x269)),await ensureReactRefreshPreamble(_0x25229a),await ensureViteClient(_0x25229a),console[_0x2ab816(0x1cf)](LOG_PREFIX+_0x2ab816(0x1f0));}catch(_0x2f1f9e){console[_0x2ab816(0x1e6)](LOG_PREFIX+_0x2ab816(0x282),_0x2f1f9e);}}async function ensureReactRefreshPreamble(_0x31d977){const _0x15edbc=_0x4dd8b6;window[_0x15edbc(0x20e)]??=new Set();if(window['__enhanceReactRefreshInstalledOrigins'][_0x15edbc(0x208)](_0x31d977)){console['log'](LOG_PREFIX+_0x15edbc(0x27d)+_0x31d977);return;}console[_0x15edbc(0x1cf)](LOG_PREFIX+'\x20Installing\x20React\x20Refresh\x20runtime\x20from\x20'+_0x31d977+_0x15edbc(0x226));const _0xdf1a64=await import(_0x31d977+_0x15edbc(0x242)),_0x1e0ff4=_0xdf1a64&&typeof _0xdf1a64===_0x15edbc(0x1f3)&&'default'in _0xdf1a64?_0xdf1a64[_0x15edbc(0x1d2)]:_0xdf1a64;if(!isRefreshRuntime(_0x1e0ff4)){console[_0x15edbc(0x1e6)](LOG_PREFIX+_0x15edbc(0x228));return;}_0x1e0ff4[_0x15edbc(0x289)](window),window[_0x15edbc(0x1c1)]=()=>{},window[_0x15edbc(0x1ce)]=()=>_0x508ede=>_0x508ede,window[_0x15edbc(0x230)]=!![],window[_0x15edbc(0x20e)][_0x15edbc(0x27e)](_0x31d977),console[_0x15edbc(0x1cf)](LOG_PREFIX+'\x20React\x20Refresh\x20runtime\x20installed\x20for\x20'+_0x31d977);}async function ensureViteClient(_0x376050){const _0x3a6b97=_0x4dd8b6;window['__viteHMRLoaded']??=new Set();if(window[_0x3a6b97(0x233)][_0x3a6b97(0x208)](_0x376050)){console[_0x3a6b97(0x1cf)](LOG_PREFIX+_0x3a6b97(0x2a5)+_0x376050);return;}console[_0x3a6b97(0x1cf)](LOG_PREFIX+_0x3a6b97(0x253)+_0x376050+_0x3a6b97(0x226)),await import(_0x376050+'/@vite/client'),window[_0x3a6b97(0x233)][_0x3a6b97(0x27e)](_0x376050),console['log'](LOG_PREFIX+_0x3a6b97(0x271)+_0x376050);}function isRefreshRuntime(_0x4cd40d){const _0x104383=_0x4dd8b6;return typeof _0x4cd40d==='object'&&_0x4cd40d!==null&&_0x104383(0x289)in _0x4cd40d&&typeof _0x4cd40d['injectIntoGlobalHook']===_0x104383(0x25e);}var WORKER_MESSAGE_CONFIG=_0x4dd8b6(0x280),WORKER_MESSAGE_DISABLE=_0x4dd8b6(0x1be),LOG_PREFIX2=_0x4dd8b6(0x2a0),registration=null,currentOptions2=null;async function registerServiceWorker(_0x23b076){const _0x396e5d=_0x4dd8b6;console[_0x396e5d(0x1cf)](LOG_PREFIX2+'\x20registerServiceWorker()\x20called'),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x1c6)+_0x23b076[_0x396e5d(0x244)]);if(!(_0x396e5d(0x1e3)in navigator)){console[_0x396e5d(0x1e6)](LOG_PREFIX2+_0x396e5d(0x1c8));return;}console['log'](LOG_PREFIX2+'\x20Service\x20workers\x20supported');const _0x49858f=navigator[_0x396e5d(0x1e3)]['controller'];console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x1d4),_0x49858f?.[_0x396e5d(0x29e)]??_0x396e5d(0x283)),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x290),_0x49858f?.[_0x396e5d(0x22e)]??'N/A');const _0x141823=!!_0x49858f;currentOptions2=_0x23b076,console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x22f));const _0x187954=await detectBlockingServiceWorker(_0x23b076['swPath']);if(_0x187954){console[_0x396e5d(0x2a8)](LOG_PREFIX2+'\x20BLOCKING\x20SW\x20detected:\x20'+_0x187954),console[_0x396e5d(0x2a8)](LOG_PREFIX2+_0x396e5d(0x1fc));return;}console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x20d));try{console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x229)+_0x23b076[_0x396e5d(0x244)]+_0x396e5d(0x207)),registration=await navigator[_0x396e5d(0x1e3)][_0x396e5d(0x1f4)](_0x23b076[_0x396e5d(0x244)],{'scope':'/'}),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x1f2),{'scope':registration[_0x396e5d(0x1c9)],'active':registration[_0x396e5d(0x25d)]?.[_0x396e5d(0x29e)],'waiting':registration[_0x396e5d(0x2a3)]?.[_0x396e5d(0x29e)],'installing':registration[_0x396e5d(0x2ad)]?.['scriptURL']}),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x20b));const _0x382379=await navigator[_0x396e5d(0x1e3)]['ready'];console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x246),_0x382379[_0x396e5d(0x25d)]?.[_0x396e5d(0x29e)]);const _0x9df082=ownsCurrentController(_0x23b076[_0x396e5d(0x244)]);state[_0x396e5d(0x22a)]=_0x9df082,console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x270)+_0x9df082),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x235),navigator['serviceWorker'][_0x396e5d(0x284)]?.[_0x396e5d(0x29e)]??_0x396e5d(0x283));if(!_0x141823&&!navigator[_0x396e5d(0x1e3)][_0x396e5d(0x284)]){console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x22b)),window[_0x396e5d(0x29f)][_0x396e5d(0x1f8)]();return;}console['log'](LOG_PREFIX2+'\x20Sending\x20customer\x20configuration...'),await sendConfiguration();if(state['enabled']){const _0x1d0f48=document['querySelector']('[data-enhance-runtime-bootstrap]')!==null;console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x204)+_0x1d0f48);if(!_0x1d0f48){console['log'](LOG_PREFIX2+_0x396e5d(0x213)),window[_0x396e5d(0x29f)][_0x396e5d(0x1f8)]();return;}}console['log'](LOG_PREFIX2+_0x396e5d(0x238)),updateOverlay(),console[_0x396e5d(0x1cf)](LOG_PREFIX2+_0x396e5d(0x1bb));}catch(_0x293e4e){console[_0x396e5d(0x2a8)](LOG_PREFIX2+'\x20Failed\x20to\x20register\x20service\x20worker:',_0x293e4e);}}async function sendConfiguration(){const _0x7551b2=_0x4dd8b6;console[_0x7551b2(0x1cf)](LOG_PREFIX2+_0x7551b2(0x236)),console[_0x7551b2(0x1cf)](LOG_PREFIX2+_0x7551b2(0x250)+state['enabled']+',\x20currentOptions:\x20'+!!currentOptions2);if(!state[_0x7551b2(0x23a)]||!currentOptions2){console[_0x7551b2(0x1cf)](LOG_PREFIX2+_0x7551b2(0x25f));return;}const _0x586c7b=await resolveWorker();if(!_0x586c7b){console[_0x7551b2(0x1e6)](LOG_PREFIX2+'\x20No\x20service\x20worker\x20active\x20to\x20configure');return;}const _0x4a3c9e={'callbackBypass':currentOptions2['callbackBypass'],'securityMode':currentOptions2[_0x7551b2(0x2ae)]};console[_0x7551b2(0x1cf)](LOG_PREFIX2+_0x7551b2(0x1c0),JSON[_0x7551b2(0x248)](_0x4a3c9e,null,0x2)),_0x586c7b[_0x7551b2(0x206)]({'type':WORKER_MESSAGE_CONFIG,'config':_0x4a3c9e}),console[_0x7551b2(0x1cf)](LOG_PREFIX2+_0x7551b2(0x1f9));}async function unregisterServiceWorker(_0x1c948d){const _0x2c1a10=_0x4dd8b6;console[_0x2c1a10(0x1cf)](LOG_PREFIX2+_0x2c1a10(0x2a7));if(!('serviceWorker'in navigator)){console['log'](LOG_PREFIX2+_0x2c1a10(0x27f));return;}try{const _0x5ba461=registration??await navigator[_0x2c1a10(0x1e3)][_0x2c1a10(0x227)]('/');if(!_0x5ba461){console['log'](LOG_PREFIX2+_0x2c1a10(0x1ea));return;}console[_0x2c1a10(0x1cf)](LOG_PREFIX2+'\x20Found\x20registration:',{'scope':_0x5ba461[_0x2c1a10(0x1c9)],'active':_0x5ba461['active']?.[_0x2c1a10(0x29e)],'waiting':_0x5ba461[_0x2c1a10(0x2a3)]?.['scriptURL'],'installing':_0x5ba461[_0x2c1a10(0x2ad)]?.['scriptURL']});const _0x5e28ec=[_0x5ba461[_0x2c1a10(0x25d)]?.['scriptURL'],_0x5ba461[_0x2c1a10(0x2a3)]?.['scriptURL'],_0x5ba461[_0x2c1a10(0x2ad)]?.[_0x2c1a10(0x29e)]],_0x33c2ce=_0x5e28ec[_0x2c1a10(0x1db)](_0x5d8616=>_0x5d8616&&ownsServiceWorker(_0x5d8616,_0x1c948d));if(!_0x33c2ce){console['log'](LOG_PREFIX2+_0x2c1a10(0x1c2));return;}_0x5ba461['active']&&(console[_0x2c1a10(0x1cf)](LOG_PREFIX2+'\x20Sending\x20DISABLE\x20message\x20to\x20SW...'),_0x5ba461[_0x2c1a10(0x25d)][_0x2c1a10(0x206)]({'type':WORKER_MESSAGE_DISABLE})),console[_0x2c1a10(0x1cf)](LOG_PREFIX2+_0x2c1a10(0x262)),await _0x5ba461['unregister'](),registration=null,currentOptions2=null,console['log'](LOG_PREFIX2+_0x2c1a10(0x21a));}catch(_0x373b71){console[_0x2c1a10(0x2a8)](LOG_PREFIX2+'\x20Failed\x20to\x20unregister\x20service\x20worker:',_0x373b71);}}function ownsServiceWorker(_0x13ce69,_0x4538b2){const _0x1b4296=_0x4dd8b6,_0x2d6457=typeof window!=='undefined'?window[_0x1b4296(0x29f)]['origin']:'',_0x36f930=new URL(_0x4538b2,_0x2d6457||void 0x0)[_0x1b4296(0x221)],_0x4cf7ab=_0x13ce69===_0x36f930||_0x13ce69[_0x1b4296(0x2b3)](_0x1b4296(0x26f));return console[_0x1b4296(0x1cf)](LOG_PREFIX2+'\x20ownsServiceWorker?\x20scriptURL='+_0x13ce69+_0x1b4296(0x1f6)+_0x36f930+',\x20owns='+_0x4cf7ab),_0x4cf7ab;}function ownsCurrentController(_0xe902a4){const _0x4f153c=_0x4dd8b6;if(typeof navigator===_0x4f153c(0x29a))return![];const _0x260213=navigator['serviceWorker']?.['controller'];if(!_0x260213)return console[_0x4f153c(0x1cf)](LOG_PREFIX2+'\x20No\x20current\x20controller'),![];return ownsServiceWorker(_0x260213[_0x4f153c(0x29e)],_0xe902a4);}async function detectBlockingServiceWorker(_0xe966c3){const _0xb1e0a7=_0x4dd8b6;if(!navigator[_0xb1e0a7(0x1e3)])return null;try{const _0x5868a7=await navigator['serviceWorker'][_0xb1e0a7(0x227)]('/');console[_0xb1e0a7(0x1cf)](LOG_PREFIX2+_0xb1e0a7(0x254),_0x5868a7?.['active']?.[_0xb1e0a7(0x29e)]??_0xb1e0a7(0x283));const _0x2afbc9=_0x5868a7?.['active']?.[_0xb1e0a7(0x29e)];if(!_0x2afbc9)return null;if(ownsServiceWorker(_0x2afbc9,_0xe966c3))return null;return _0x2afbc9;}catch(_0x3bf34b){return console[_0xb1e0a7(0x2a8)](LOG_PREFIX2+_0xb1e0a7(0x216),_0x3bf34b),null;}}async function resolveWorker(){const _0x55d4d2=_0x4dd8b6,_0x44391f=registration??await navigator[_0x55d4d2(0x1e3)]?.[_0x55d4d2(0x227)]('/'),_0x47bb44=_0x44391f?.[_0x55d4d2(0x25d)]??_0x44391f?.['waiting']??_0x44391f?.[_0x55d4d2(0x2ad)]??null;return console['log'](LOG_PREFIX2+_0x55d4d2(0x1ec),_0x47bb44?.[_0x55d4d2(0x29e)]??_0x55d4d2(0x283),'state:\x20'+(_0x47bb44?.['state']??_0x55d4d2(0x29b))),_0x47bb44;}var LOG_PREFIX3='[Enhance\x20Runtime]';function isInitialized(){const _0x5c99e6=_0x4dd8b6;return typeof window!=='undefined'&&window[_0x5c99e6(0x20a)]===!![];}function setInitialized(_0x504e66){const _0x5d3455=_0x4dd8b6;typeof window!==_0x5d3455(0x29a)&&(window['__enhanceInitialized']=_0x504e66);}function getOptions(){const _0x54b387=_0x4dd8b6;return typeof window!==_0x54b387(0x29a)?window['__enhanceOptions']??null:null;}function setOptions(_0x489ce3){const _0x32ffae=_0x4dd8b6;typeof window!==_0x32ffae(0x29a)&&(window[_0x32ffae(0x1e8)]=_0x489ce3);}var Enhance={'init'(_0x5be047){const _0x280361=_0x4dd8b6,_0x5a63ea=Date[_0x280361(0x214)]();console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x2b6)+_0x5a63ea),console['log'](LOG_PREFIX3+_0x280361(0x298)+window[_0x280361(0x29f)][_0x280361(0x221)]),console['log'](LOG_PREFIX3+_0x280361(0x28b)+document['readyState']),console[_0x280361(0x1cf)](LOG_PREFIX3+'\x20Raw\x20options:',JSON[_0x280361(0x248)](_0x5be047,null,0x2));if(isInitialized())return console[_0x280361(0x1e6)](LOG_PREFIX3+_0x280361(0x1bf)),window[_0x280361(0x256)]??createController();setInitialized(!![]),console['log'](LOG_PREFIX3+_0x280361(0x1d1));const _0x508117=normalizeOptions(_0x5be047);setOptions(_0x508117),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x234),JSON[_0x280361(0x248)](_0x508117,null,0x2));const _0x39f971=parseUrlParams();console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x1ed),JSON[_0x280361(0x248)](_0x39f971,null,0x2));if(_0x39f971[_0x280361(0x249)])return cleanUrlParam(_0x280361(0x215)),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x299)),createController();if(_0x39f971[_0x280361(0x240)])return console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x21f)),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x1ca)+_0x39f971['enhancementUrl']),console['log'](LOG_PREFIX3+_0x280361(0x1f1)+_0x39f971[_0x280361(0x1b9)]),state[_0x280361(0x23a)]=!![],console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x291)),void loadOverlay({'overlayPath':_0x508117[_0x280361(0x278)],'enableViteHmr':_0x508117['overlay']['enableViteHmr'],'options':_0x508117,'onToggle':handleToggle}),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x22d)),void registerServiceWorker(_0x508117),console[_0x280361(0x1cf)](LOG_PREFIX3+'\x20init()\x20complete\x20-\x20enhancement\x20mode'),createController();return console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x24a)),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x274)),void unregisterServiceWorker(_0x508117[_0x280361(0x244)]),console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x275)),import.meta[_0x280361(0x252)]&&(console[_0x280361(0x1cf)](LOG_PREFIX3+_0x280361(0x260)),import.meta[_0x280361(0x252)]['on']('vite:error',_0x42618b=>{const _0xd489ba=_0x280361;console[_0xd489ba(0x1cf)](LOG_PREFIX3+_0xd489ba(0x1fb),_0x42618b),state['appError']={'message':_0x42618b['err']['message']},updateOverlay();}),import.meta[_0x280361(0x252)]['on']('vite:beforeUpdate',()=>{const _0x47fef8=_0x280361;state[_0x47fef8(0x27b)]&&(console['log'](LOG_PREFIX3+_0x47fef8(0x1d7)),state[_0x47fef8(0x27b)]=null,updateOverlay());})),createController();}};function createController(){const _0x551d0a=_0x4dd8b6,_0x5a3b9e={'enable'(){const _0x344125=_0x2163,_0x4efd05=getOptions();if(!_0x4efd05)return;state['enabled']=!![],void loadOverlay({'overlayPath':_0x4efd05['overlayPath'],'enableViteHmr':_0x4efd05[_0x344125(0x1ef)][_0x344125(0x21b)],'options':_0x4efd05,'onToggle':handleToggle}),void registerServiceWorker(_0x4efd05),void sendConfiguration(),updateOverlay();},'disable'(){const _0x547175=_0x2163,_0x2b697e=getOptions();if(!_0x2b697e)return;state['enabled']=![],state[_0x547175(0x22a)]=![],updateOverlay(),void unregisterServiceWorker(_0x2b697e['swPath']);},'status'(){return{'enabled':state['enabled'],'controlled':state['controlled']};}};return typeof window!==_0x551d0a(0x29a)&&(window[_0x551d0a(0x256)]=_0x5a3b9e),_0x5a3b9e;}function handleToggle(){const _0x3903da=_0x4dd8b6,_0x2a0ac4=createController();state[_0x3903da(0x23a)]?_0x2a0ac4['disable']():_0x2a0ac4[_0x3903da(0x1e0)]();}function parseUrlParams(){const _0x3b6f76=_0x4dd8b6,_0x569972=new URL(window[_0x3b6f76(0x29f)][_0x3b6f76(0x221)]),_0x3fee33=_0x569972['searchParams']['get']('enhance')?.[_0x3b6f76(0x28f)](),_0x3c223a=_0x569972['searchParams']['get'](_0x3b6f76(0x1d9)),_0x5316c1=_0x569972[_0x3b6f76(0x2ab)][_0x3b6f76(0x25c)](_0x3b6f76(0x1dc));return{'hasEnhancement':Boolean(_0x3c223a||_0x5316c1),'explicitDisable':_0x3fee33==='0'||_0x3fee33===_0x3b6f76(0x1d0)||_0x3fee33===_0x3b6f76(0x247),'enhancementUrl':_0x3c223a,'enhancementId':_0x5316c1};}function cleanUrlParam(_0x2c1be5){const _0x37408c=_0x4dd8b6,_0x4f7038=new URL(window[_0x37408c(0x29f)][_0x37408c(0x221)]);_0x4f7038[_0x37408c(0x2ab)][_0x37408c(0x208)](_0x2c1be5)&&(_0x4f7038['searchParams']['delete'](_0x2c1be5),window[_0x37408c(0x26b)][_0x37408c(0x261)](null,document['title'],_0x4f7038[_0x37408c(0x23c)]()));}var package_default={'name':'@enhance-eng/sandbox','version':_0x4dd8b6(0x1c7),'type':_0x4dd8b6(0x295),'description':_0x4dd8b6(0x1bc),'license':_0x4dd8b6(0x2a9),'main':'./dist/index.cjs','module':'./dist/index.js','types':_0x4dd8b6(0x1cc),'exports':{'.':{'types':_0x4dd8b6(0x1cc),'import':'./dist/index.js','require':_0x4dd8b6(0x211)},'./vite':{'types':_0x4dd8b6(0x286),'import':_0x4dd8b6(0x1c4)}},'files':[_0x4dd8b6(0x1cb),'bin',_0x4dd8b6(0x2b7)],'bin':{'enhance-sandbox':_0x4dd8b6(0x223)},'scripts':{'typecheck':_0x4dd8b6(0x2b5),'dev':_0x4dd8b6(0x222),'dev:build':_0x4dd8b6(0x201),'dev:staging':_0x4dd8b6(0x25b),'dev:staging:build':'ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup','build':_0x4dd8b6(0x21d),'build:release':_0x4dd8b6(0x225),'version':'pnpm\x20version\x20patch\x20--no-git-tag-version'},'dependencies':{'commander':'^11.1.0','zod':_0x4dd8b6(0x294)},'devDependencies':{'@types/node':_0x4dd8b6(0x24c),'javascript-obfuscator':_0x4dd8b6(0x21e),'tsup':_0x4dd8b6(0x2b2),'vite':'^7.2.4'},'publishConfig':{'access':_0x4dd8b6(0x1e7)}},DEFAULT_SERVICE_WORKER_PATH=_0x4dd8b6(0x2a1),DEFAULT_RUNTIME_PATH=_0x4dd8b6(0x1dd),DIST_SERVICE_WORKER_PATH=_0x4dd8b6(0x218),DIST_RUNTIME_PATH=_0x4dd8b6(0x292),PACKAGE_VERSION=typeof package_default[_0x4dd8b6(0x28d)]===_0x4dd8b6(0x251)?package_default[_0x4dd8b6(0x28d)]:_0x4dd8b6(0x259);function normalizeAssetPath(_0x3e62ee){const _0x5c0d54=_0x4dd8b6;if(!_0x3e62ee)return _0x3e62ee;if(_0x3e62ee[_0x5c0d54(0x1cd)]('http://')||_0x3e62ee[_0x5c0d54(0x1cd)](_0x5c0d54(0x23b)))return _0x3e62ee;const _0x131d77=_0x3e62ee[_0x5c0d54(0x296)](/^\.\//,'');return _0x131d77['startsWith']('/')?_0x131d77:'/'+_0x131d77;}var defaultSwPath=normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),defaultRuntimePath=normalizeAssetPath(DEFAULT_RUNTIME_PATH),Enhance2={'init'(_0x5907f0){const _0x5054f7=_0x4dd8b6;return Enhance[_0x5054f7(0x1e1)](_0x5907f0);},'serviceWorkerURL'(){return defaultSwPath;},'runtimeURL'(){return defaultRuntimePath;},'assetManifest'(){return getAssetManifest();}};function getAssetManifest(){return{'version':PACKAGE_VERSION,'serviceWorker':serviceWorkerURL(),'runtime':runtimeURL(),'serviceWorkerDigest':null,'runtimeDigest':null};}function serviceWorkerURL(){const _0x2adc97=_0x4dd8b6;return Enhance2[_0x2adc97(0x1fd)]();}function _0x2163(_0x31cd6,_0x34b831){const _0x42327b=_0x4232();return _0x2163=function(_0x21631b,_0x15cd66){_0x21631b=_0x21631b-0x1b9;let _0x132de2=_0x42327b[_0x21631b];return _0x132de2;},_0x2163(_0x31cd6,_0x34b831);}function runtimeURL(){const _0x4305f2=_0x4dd8b6;return Enhance2[_0x4305f2(0x28c)]();}import{promises as _0x47fd34}from'fs';import{createHash}from'crypto';import{dirname,join}from'path';import{fileURLToPath}from'url';var distDir=dirname(fileURLToPath(new URL(_0x4dd8b6(0x2a2),import.meta['url'])));async function syncAssets(_0x249c92){const _0x565b6c=_0x4dd8b6,_0x43c236=[{'sourcePath':DIST_SERVICE_WORKER_PATH,'manifestPath':normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),'override':_0x249c92['swFilename']?'./'+_0x249c92[_0x565b6c(0x1d5)]:void 0x0},{'sourcePath':DIST_RUNTIME_PATH,'manifestPath':normalizeAssetPath(DEFAULT_RUNTIME_PATH)}],_0x5b054e=[];for(const _0x1e0c72 of _0x43c236){const _0x4e4dbe=cleanRelativePath(_0x1e0c72['override']??_0x1e0c72[_0x565b6c(0x263)]),_0x6ba4cf=join(distDir,cleanRelativePath(_0x1e0c72['sourcePath'])),_0x42c00d=join(_0x249c92[_0x565b6c(0x1d3)],_0x4e4dbe),[_0x749d47,_0x2b3096]=await Promise[_0x565b6c(0x1fa)]([readDigest(_0x6ba4cf),readDigest(_0x42c00d)]);if(_0x749d47&&_0x2b3096&&_0x749d47===_0x2b3096){_0x5b054e[_0x565b6c(0x258)]({'sourcePath':_0x6ba4cf,'destinationPath':_0x42c00d,'relativeDestination':_0x4e4dbe,'status':'skipped'});continue;}await _0x47fd34[_0x565b6c(0x220)](dirname(_0x42c00d),{'recursive':!![]}),await _0x47fd34[_0x565b6c(0x224)](_0x6ba4cf,_0x42c00d),_0x5b054e[_0x565b6c(0x258)]({'sourcePath':_0x6ba4cf,'destinationPath':_0x42c00d,'relativeDestination':_0x4e4dbe,'status':_0x565b6c(0x29d)});}return _0x5b054e;}function cleanRelativePath(_0x1023fa){const _0x343651=_0x4dd8b6;return _0x1023fa[_0x343651(0x296)](/^[./]+/,'');}function _0x4232(){const _0x1065f0=['update','\x20resolveWorker:','\x20URL\x20params\x20parsed:','308DXnyOr','overlay','\x20HMR\x20setup\x20complete','\x20enhancementId:\x20','\x20Registration\x20returned:','object','register','[Enhance\x20Config]\x20Build-time\x20defaults:',',\x20expected=','--filename\x20<name>','reload','\x20Config\x20sent\x20to\x20SW','all','\x20Vite\x20error\x20detected:','\x20Enhancement\x20features\x20will\x20NOT\x20work\x20until\x20it\x20is\x20unregistered','serviceWorkerURL','skipped','2719384QZKmIS','options','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup','origin','\x20(already\x20current)\x20[','\x20Enhancement\x20detection:\x20wasEnhanced=','parseAsync','postMessage','\x20with\x20scope\x20\x27/\x27...','has','base64','__enhanceInitialized','\x20Waiting\x20for\x20navigator.serviceWorker.ready...','permissive','\x20No\x20blocking\x20SW\x20found','__enhanceReactRefreshInstalledOrigins','403041tJeyok','stdout','./dist/index.cjs','action','\x20Page\x20not\x20enhanced\x20by\x20SW\x20-\x20reloading\x20to\x20apply\x20enhancement','now','enhance','\x20detectBlocking\x20error:','436671bkkGyu','sw-enhance.js','\x20loadOverlay()\x20failed:','\x20SW\x20unregistered\x20successfully','enableViteHmr','backendUrl','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20tsup','^4.1.1','\x20Enhancement\x20mode\x20ENABLED','mkdir','href','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup\x20--watch','bin/enhance-sandbox.js','copyFile','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20OBFUSCATE=1\x20RELEASE=1\x20tsup','...','getRegistration','\x20Invalid\x20React\x20Refresh\x20runtime','\x20Registering\x20SW\x20at\x20','controlled','\x20Page\x20was\x20not\x20controlled\x20-\x20SW\x20just\x20activated.\x20Reloading\x20to\x20enable\x20enhancement...','9609910PTwmlC','\x20Starting\x20SW\x20registration\x20(async)...','state','\x20Checking\x20for\x20blocking\x20service\x20worker...','__vite_plugin_react_preamble_installed__','\x20Overlay\x20origin:\x20','filename','__viteHMRLoaded','\x20Normalized\x20options:','\x20Current\x20controller\x20after\x20ready:','\x20sendConfiguration()\x20called','--public-dir\x20<path>','\x20Updating\x20overlay...','\x20Found\x20cached\x20overlay\x20controller\x20on\x20window.__enhanceOverlay\x20-\x20reusing','enabled','https://','toString','keys','Copy\x20the\x20service\x20worker\x20and\x20overlay\x20bundle\x20into\x20a\x20public\x20directory','Override\x20the\x20service\x20worker\x20output\x20filename\x20(defaults\x20to\x20sw-enhance.js)','hasEnhancement','\x20Failed\x20to\x20import/create\x20overlay:','/@react-refresh','\x20Available\x20exports:','swPath','\x20Updating\x20overlay\x20with\x20state:','\x20SW\x20ready!\x20Active:','off','stringify','explicitDisable','\x20Normal\x20mode\x20-\x20no\x20enhancement\x20params','cwd','^24.10.1','onToggle','\x20enableViteHmr:\x20','bottom-right','\x20state.enabled:\x20','string','hot','\x20Loading\x20Vite\x20HMR\x20client\x20from\x20','\x20detectBlocking\x20-\x20existing\x20registration:','\x20Load\x20already\x20in\x20progress\x20-\x20waiting...','__enhanceController','\x20loadOverlay()\x20complete','push','0.0.0','\x20composeOverlayState\x20-\x20state.controlled:\x20','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup\x20--watch','get','active','function','\x20Skipping\x20-\x20not\x20enabled\x20or\x20no\x20options','\x20Setting\x20up\x20Vite\x20HMR\x20error\x20listeners','replaceState','\x20Unregistering\x20SW...','manifestPath','4114188uvqWwA','\x20Module\x20missing\x20createOverlay\x20export!','\x20Setting\x20up\x20remote\x20HMR...','7pQXNQT','Skipped\x20','\x20Cross-origin\x20overlay\x20-\x20setting\x20up\x20HMR...','status','history','enhance-sandbox','\x20Importing\x20overlay\x20module\x20from:\x20','info','sw-enhance','\x20Page\x20controlled\x20by\x20our\x20SW:\x20','\x20Vite\x20HMR\x20client\x20loaded\x20for\x20','\x20Overlay\x20controller\x20initialized\x20and\x20cached','Enhance\x20sandbox\x20utility\x20CLI','\x20Unregistering\x20any\x20existing\x20SW...','\x20init()\x20complete\x20-\x20normal\x20mode','__enhanceOverlay','code','overlayPath','\x20â†’\x20','\x20No\x20cached\x20controller\x20-\x20will\x20import\x20module','appError','option','\x20React\x20Refresh\x20already\x20installed\x20for\x20','add','\x20No\x20serviceWorker\x20support\x20-\x20nothing\x20to\x20unregister','enhance:configure','Copied\x20','\x20Failed\x20to\x20prepare\x20remote\x20HMR\x20(non-fatal):','none','controller','2685348KBbpXU','./dist/vite/index.d.ts','\x20composeOverlayState\x20-\x20state.enabled:\x20','\x20currentOptions\x20exists:\x20','injectIntoGlobalHook','10035EWluzy','\x20Document\x20readyState:\x20','runtimeURL','version','position','toLowerCase','\x20Controller\x20state:','\x20Starting\x20overlay\x20load\x20(async)...','assets/enhance-runtime.js','createOverlay','^3.22.4','module','replace','__development','\x20Current\x20URL:\x20','\x20Explicit\x20disable\x20via\x20URL\x20param\x20-\x20exiting','undefined','N/A','\x20Calling\x20createOverlay()...','copied','scriptURL','location','[Enhance\x20SW-Client]','/sw-enhance.js','../dist/index.js','waiting','ENOENT','\x20Vite\x20client\x20already\x20loaded\x20for\x20','digest','\x20unregisterServiceWorker()\x20called','error','MIT','\x20loadOverlay()\x20called','searchParams','\x20overlayPath:\x20','installing','security','\x20setupRemoteHMR()\x20for\x20','command','write','^8.5.1','includes','\x20Module\x20imported\x20in\x20','tsc\x20--noEmit','\x20init()\x20called\x20at\x20','enhance.config.sample.json','description','enhancementId',',\x20page\x20origin:\x20','\x20registerServiceWorker()\x20complete','Enhance\x20preview\x20bootstrap\x20and\x20tooling\x20package.','https://assets.enhancelabs.ai/overlay.js','enhance:disable','\x20Already\x20initialized\x20(window.__enhanceInitialized=true)\x20-\x20returning\x20existing\x20controller','\x20Sending\x20customer\x20config\x20to\x20SW:','$RefreshReg$','\x20Registration\x20is\x20not\x20ours\x20-\x20not\x20unregistering','\x20No\x20window\x20object\x20-\x20skipping','./dist/vite/index.js','trim','\x20swPath:\x20','0.3.19','\x20Service\x20workers\x20NOT\x20supported\x20in\x20this\x20browser','scope','\x20enhancementUrl:\x20','dist','./dist/index.d.ts','startsWith','$RefreshSig$','log','false','\x20First\x20initialization','default','publicDir','\x20Current\x20controller:','swFilename','\x20composeOverlayState\x20-\x20enhancementUrl:\x20','\x20Vite\x20update\x20pending\x20-\x20clearing\x20error','destinationPath','enhancementUrl','name','some','enhancement','/assets/enhance-runtime.js','11UOryiG','prepare-sw','enable','init','6tueqTM','serviceWorker','relativeDestination','\x20Calling\x20updateOverlay()...','warn','public','__enhanceOptions','\x20Overlay\x20update\x20complete','\x20No\x20registration\x20found\x20-\x20nothing\x20to\x20unregister'];_0x4232=function(){return _0x1065f0;};return _0x4232();}async function readDigest(_0x42088e){const _0x385d5a=_0x4dd8b6;try{const _0x1949eb=await _0x47fd34['readFile'](_0x42088e);return createHash('sha256')[_0x385d5a(0x1eb)](_0x1949eb)[_0x385d5a(0x2a6)](_0x385d5a(0x209));}catch(_0x54cd45){if(_0x54cd45[_0x385d5a(0x277)]===_0x385d5a(0x2a4))return null;throw _0x54cd45;}}var program=new Command();program[_0x4dd8b6(0x1da)](_0x4dd8b6(0x26c))[_0x4dd8b6(0x2b8)](_0x4dd8b6(0x273))['version'](_0x4dd8b6(0x259)),program['command']('manifest')[_0x4dd8b6(0x2b8)]('Print\x20the\x20current\x20asset\x20manifest')['action'](()=>{const _0x54c6db=_0x4dd8b6,_0x4d898d=getAssetManifest();process[_0x54c6db(0x210)][_0x54c6db(0x2b1)](JSON['stringify'](_0x4d898d,null,0x2)+'\x0a');}),program[_0x4dd8b6(0x2b0)](_0x4dd8b6(0x1df))[_0x4dd8b6(0x2b8)](_0x4dd8b6(0x23e))['requiredOption'](_0x4dd8b6(0x237),'Directory\x20to\x20copy\x20the\x20service\x20worker\x20into')[_0x4dd8b6(0x27c)](_0x4dd8b6(0x1f7),_0x4dd8b6(0x23f))[_0x4dd8b6(0x212)](async _0x142219=>{const _0x243cc0=_0x4dd8b6,_0x3e1f33=resolve(process[_0x243cc0(0x24b)](),_0x142219[_0x243cc0(0x1d3)]),_0x359e49=await syncAssets({'publicDir':_0x3e1f33,'swFilename':_0x142219[_0x243cc0(0x232)]});for(const _0x41522b of _0x359e49){const _0x10541c=relative(process[_0x243cc0(0x24b)](),_0x41522b[_0x243cc0(0x1d8)]);_0x41522b[_0x243cc0(0x26a)]===_0x243cc0(0x1fe)?process[_0x243cc0(0x210)][_0x243cc0(0x2b1)](_0x243cc0(0x268)+_0x41522b[_0x243cc0(0x1e4)]+_0x243cc0(0x203)+_0x10541c+']\x0a'):process[_0x243cc0(0x210)][_0x243cc0(0x2b1)](_0x243cc0(0x281)+_0x41522b[_0x243cc0(0x1e4)]+_0x243cc0(0x279)+_0x10541c+'\x0a');}}),program[_0x4dd8b6(0x205)]();