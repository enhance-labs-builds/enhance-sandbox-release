#!/usr/bin/env node

const _0x3e6d1d=_0x2413;(function(_0x421396,_0x45c1d8){const _0x4fb78b=_0x2413,_0x236d69=_0x421396();while(!![]){try{const _0x1dfa23=parseInt(_0x4fb78b(0xe4))/0x1*(parseInt(_0x4fb78b(0x135))/0x2)+-parseInt(_0x4fb78b(0xfb))/0x3*(parseInt(_0x4fb78b(0x197))/0x4)+-parseInt(_0x4fb78b(0x1b8))/0x5*(parseInt(_0x4fb78b(0xc5))/0x6)+-parseInt(_0x4fb78b(0x199))/0x7*(-parseInt(_0x4fb78b(0x1a7))/0x8)+parseInt(_0x4fb78b(0x12f))/0x9+parseInt(_0x4fb78b(0x155))/0xa+-parseInt(_0x4fb78b(0x16c))/0xb;if(_0x1dfa23===_0x45c1d8)break;else _0x236d69['push'](_0x236d69['shift']());}catch(_0x1c971e){_0x236d69['push'](_0x236d69['shift']());}}}(_0x2dc2,0x42f05));function _0x2413(_0x4692b3,_0xde26ca){const _0x2dc2ce=_0x2dc2();return _0x2413=function(_0x241329,_0x3733c7){_0x241329=_0x241329-0xba;let _0x2076ea=_0x2dc2ce[_0x241329];return _0x2076ea;},_0x2413(_0x4692b3,_0xde26ca);}import{Command}from'commander';import{resolve,relative}from'path';var DEFAULT_OVERLAY_PATH=typeof __ENHANCE_DEFAULT_OVERLAY_PATH__!=='undefined'?__ENHANCE_DEFAULT_OVERLAY_PATH__:'https://assets.enhancelabs.ai/overlay.js',DEFAULT_BACKEND_URL=typeof __ENHANCE_DEFAULT_BACKEND_URL__!==_0x3e6d1d(0x1a3)?__ENHANCE_DEFAULT_BACKEND_URL__:_0x3e6d1d(0x139),DEFAULT_OVERLAY_HMR=typeof __ENHANCE_OVERLAY_ENABLE_HMR__!==_0x3e6d1d(0x1a3)?__ENHANCE_OVERLAY_ENABLE_HMR__:![];console[_0x3e6d1d(0x187)]('[Enhance\x20Config]\x20Build-time\x20defaults:',{'overlayPath':DEFAULT_OVERLAY_PATH,'backendUrl':DEFAULT_BACKEND_URL,'overlayHmr':DEFAULT_OVERLAY_HMR});function normalizeOptions(_0x1fee83){const _0x5f583d=_0x3e6d1d,_0x353ff0=_0x1fee83['__development']??{};return{'callbackBypass':_0x1fee83[_0x5f583d(0x114)],'overlay':{'enabled':!![],'position':_0x5f583d(0x163),'enableViteHmr':_0x353ff0[_0x5f583d(0x131)]??DEFAULT_OVERLAY_HMR},'logLevel':_0x5f583d(0x13f),'swPath':_0x5f583d(0xe3),'overlayPath':_0x353ff0[_0x5f583d(0x1a1)]??DEFAULT_OVERLAY_PATH,'runtimeScriptPath':_0x5f583d(0xcc),'security':_0x353ff0[_0x5f583d(0x191)]??'permissive','backendUrl':_0x353ff0[_0x5f583d(0x11b)]??DEFAULT_BACKEND_URL};}var state={'enabled':![],'controlled':![],'appError':null};function getEnhancementUrl(){const _0x126b2a=_0x3e6d1d;try{const _0x5eabef=new URLSearchParams(window[_0x126b2a(0x19a)]['search']);return _0x5eabef[_0x126b2a(0xcb)](_0x126b2a(0xec))?.[_0x126b2a(0x128)]()||'';}catch{return'';}}var LOG_PREFIX=_0x3e6d1d(0xce),overlayController=null,overlayLoadPromise=null,toggleHandler=null,currentOptions=null;async function loadOverlay(_0x2488ff){const _0x4d75e3=_0x3e6d1d;console[_0x4d75e3(0x187)](LOG_PREFIX+_0x4d75e3(0xe1)),console[_0x4d75e3(0x187)](LOG_PREFIX+_0x4d75e3(0x17d)+_0x2488ff[_0x4d75e3(0x1a1)]),console[_0x4d75e3(0x187)](LOG_PREFIX+_0x4d75e3(0x1b9)+_0x2488ff['enableViteHmr']),currentOptions=_0x2488ff[_0x4d75e3(0x11f)],toggleHandler=_0x2488ff[_0x4d75e3(0x112)];if(overlayController){console[_0x4d75e3(0x187)](LOG_PREFIX+_0x4d75e3(0x120)),updateOverlay();return;}if(overlayLoadPromise)return console['log'](LOG_PREFIX+_0x4d75e3(0x188)),overlayLoadPromise;console['log'](LOG_PREFIX+_0x4d75e3(0x1ba)),overlayLoadPromise=doLoadOverlay(_0x2488ff);try{await overlayLoadPromise,console[_0x4d75e3(0x187)](LOG_PREFIX+'\x20loadOverlay()\x20complete');}catch(_0x441076){console[_0x4d75e3(0xcf)](LOG_PREFIX+_0x4d75e3(0xba),_0x441076);}finally{overlayLoadPromise=null;}}async function doLoadOverlay(_0x30d3f6){const _0x380454=_0x3e6d1d;console[_0x380454(0x187)](LOG_PREFIX+'\x20doLoadOverlay()\x20starting...');if(typeof window===_0x380454(0x1a3)){console['log'](LOG_PREFIX+'\x20No\x20window\x20object\x20-\x20skipping');return;}if(window[_0x380454(0x1a4)]){console['log'](LOG_PREFIX+_0x380454(0xde)),overlayController=window[_0x380454(0x1a4)],overlayController[_0x380454(0x112)](_0x30d3f6['onToggle']),updateOverlay();return;}console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x142));try{_0x30d3f6[_0x380454(0x11d)]&&(console['log'](LOG_PREFIX+_0x380454(0xf3)),await setupRemoteHMR(_0x30d3f6[_0x380454(0x1a1)]));console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x195)+_0x30d3f6[_0x380454(0x1a1)]);const _0x29b38d=Date['now'](),_0x2f0a5e=await import(_0x30d3f6['overlayPath']);console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x1a2)+(Date[_0x380454(0xd1)]()-_0x29b38d)+'ms'),console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0xd2),Object[_0x380454(0x19b)](_0x2f0a5e));if(typeof _0x2f0a5e?.[_0x380454(0xdf)]!==_0x380454(0xc8)){console[_0x380454(0xcf)](LOG_PREFIX+_0x380454(0x172)),console[_0x380454(0xcf)](LOG_PREFIX+_0x380454(0x150),Object['keys'](_0x2f0a5e));return;}console['log'](LOG_PREFIX+_0x380454(0x193));const _0x364f21=_0x2f0a5e['createOverlay']();console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x10e),_0x364f21),overlayController=_0x364f21,window[_0x380454(0x1a4)]=_0x364f21,_0x364f21[_0x380454(0x112)](_0x30d3f6['onToggle']),console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x164)),console[_0x380454(0x187)](LOG_PREFIX+_0x380454(0x15c)),updateOverlay();}catch(_0x39bf99){console[_0x380454(0xcf)](LOG_PREFIX+'\x20Failed\x20to\x20import/create\x20overlay:',_0x39bf99);}}function updateOverlay(){const _0x55e473=_0x3e6d1d;console[_0x55e473(0x187)](LOG_PREFIX+_0x55e473(0x159)),console[_0x55e473(0x187)](LOG_PREFIX+_0x55e473(0x192)+!!overlayController),console[_0x55e473(0x187)](LOG_PREFIX+_0x55e473(0xd8)+!!currentOptions);if(!overlayController||!currentOptions){console['log'](LOG_PREFIX+'\x20Missing\x20controller\x20or\x20options\x20-\x20skipping\x20update');return;}const _0xae65e1=composeOverlayState(currentOptions);console[_0x55e473(0x187)](LOG_PREFIX+'\x20Updating\x20overlay\x20with\x20state:',JSON[_0x55e473(0x13d)](_0xae65e1,null,0x2)),overlayController[_0x55e473(0xff)](_0xae65e1),console[_0x55e473(0x187)](LOG_PREFIX+_0x55e473(0x169));}function composeOverlayState(_0x57b0a9){const _0x1f122d=_0x3e6d1d,_0x5c88e9=getEnhancementUrl();return console['log'](LOG_PREFIX+_0x1f122d(0x1b6)+_0x5c88e9),console['log'](LOG_PREFIX+_0x1f122d(0xc4)+state[_0x1f122d(0x125)]),console[_0x1f122d(0x187)](LOG_PREFIX+_0x1f122d(0xd7)+state[_0x1f122d(0x134)]),{'enhancementUrl':_0x5c88e9,'enabled':state[_0x1f122d(0x125)],'controlled':state[_0x1f122d(0x134)],'overlayPosition':_0x57b0a9[_0x1f122d(0x137)][_0x1f122d(0x1ad)],'securityMode':_0x57b0a9[_0x1f122d(0x191)],'backendBaseUrl':_0x57b0a9[_0x1f122d(0x11b)],'appError':state[_0x1f122d(0xc1)]};}function _0x2dc2(){const _0x165455=['$RefreshReg$','init','enabled','copied','serviceWorker','trim','\x20resolveWorker:','https://','write','title','\x20Vite\x20HMR\x20client\x20loaded\x20for\x20','\x20detectBlocking\x20-\x20existing\x20registration:','3568473onELSp','./dist/index.d.ts','enableOverlayHmr','Enhance\x20preview\x20bootstrap\x20and\x20tooling\x20package.','bin','controlled','11910uTySdx','querySelector','overlay','toLowerCase','https://api.enhancelabs.ai','url','command','assets/enhance-runtime.js','stringify','\x20Registration\x20returned:','info','\x20Enhancement\x20features\x20will\x20NOT\x20work\x20until\x20it\x20is\x20unregistered','\x20Found\x20registration:','\x20No\x20cached\x20controller\x20-\x20will\x20import\x20module','\x20SW\x20unregistered\x20successfully','active','[data-enhance-runtime-bootstrap]','off','swFilename','stdout','tsc\x20--noEmit','Enhance\x20sandbox\x20utility\x20CLI','publicDir','^7.2.4','getRegistration','\x20Page\x20controlled\x20by\x20our\x20SW:\x20','err','\x20Available\x20exports:','scriptURL','\x20Unregistering\x20SW...','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup','bin/enhance-sandbox.js','2557140tDOdZv','\x20unregisterServiceWorker()\x20called',',\x20owns=','/@vite/client','\x20updateOverlay()\x20called',',\x20expected=','\x20HMR\x20setup\x20complete','\x20Calling\x20updateOverlay()...','filename','\x20SW\x20ready!\x20Active:','sw-enhance.js','false','\x20Page\x20not\x20enhanced\x20by\x20SW\x20-\x20reloading\x20to\x20apply\x20enhancement','register','bottom-right','\x20Overlay\x20controller\x20initialized\x20and\x20cached','warn','\x20Controller\x20state:','action','\x20Same\x20origin\x20-\x20skipping\x20HMR\x20setup','\x20Overlay\x20update\x20complete','\x20No\x20blocking\x20SW\x20found','\x20registerServiceWorker()\x20complete','12331847ipuSyf','\x20React\x20Refresh\x20already\x20installed\x20for\x20','\x20BLOCKING\x20SW\x20detected:\x20','\x20Skipping\x20-\x20not\x20enabled\x20or\x20no\x20options','readyState','\x20Service\x20workers\x20NOT\x20supported\x20in\x20this\x20browser','\x20Module\x20missing\x20createOverlay\x20export!','description','enhance','explicitDisable','__vite_plugin_react_preamble_installed__','base64','enhance:configure','\x20(already\x20current)\x20[','^24.10.1','enhance.config.sample.json','[Enhance\x20Runtime]','\x20overlayPath:\x20','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup\x20--watch','skipped','hot','swPath','./dist/vite/index.js','message','\x20React\x20Refresh\x20runtime\x20installed\x20for\x20','\x20No\x20service\x20worker\x20active\x20to\x20configure','__viteHMRLoaded','log','\x20Load\x20already\x20in\x20progress\x20-\x20waiting...','href','replace','ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://enhance-api-dev.enhancelabs.workers.dev\x20tsup\x20--watch','manifestPath','installing','\x20No\x20serviceWorker\x20support\x20-\x20nothing\x20to\x20unregister','parseAsync','pnpm\x20version\x20patch\x20--no-git-tag-version','security','\x20overlayController\x20exists:\x20','\x20Calling\x20createOverlay()...','http://','\x20Importing\x20overlay\x20module\x20from:\x20','\x20Page\x20was\x20not\x20controlled\x20-\x20SW\x20just\x20activated.\x20Reloading\x20to\x20enable\x20enhancement...','26476cDAWWe','state','7AaVQTP','location','keys','\x20Updating\x20overlay...','\x20with\x20scope\x20\x27/\x27...','\x20Explicit\x20disable\x20via\x20URL\x20param\x20-\x20exiting','\x20Registration\x20is\x20not\x20ours\x20-\x20not\x20unregistering','\x20Config\x20sent\x20to\x20SW','overlayPath','\x20Module\x20imported\x20in\x20','undefined','__enhanceOverlay','delete','\x20ownsServiceWorker?\x20scriptURL=','2594392GvotRC','unregister','object','destinationPath','enhancementId','version','position','\x20Vite\x20error\x20detected:','0.0.0','$RefreshSig$','vite:beforeUpdate','\x20Current\x20URL:\x20','sourcePath','\x20Vite\x20update\x20pending\x20-\x20clearing\x20error','controller','\x20composeOverlayState\x20-\x20enhancementUrl:\x20','MIT','4175uJYkrR','\x20enableViteHmr:\x20','\x20Starting\x20fresh\x20overlay\x20load...','requiredOption','\x20loadOverlay()\x20failed:','hasEnhancement','Copied\x20','ready','\x20Service\x20workers\x20supported','\x20Starting\x20overlay\x20load\x20(async)...','/@react-refresh','appError','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20tsup','none','\x20composeOverlayState\x20-\x20state.enabled:\x20','186wtnXQO','includes','__enhanceController','function','ENHANCE_OVERLAY_PATH=https://assets.enhancelabs.ai/overlay.js\x20ENHANCE_BACKEND_URL=https://api.enhancelabs.ai\x20OBFUSCATE=1\x20RELEASE=1\x20tsup','\x20Checking\x20for\x20blocking\x20service\x20worker...','get','/assets/enhance-runtime.js','Copy\x20the\x20service\x20worker\x20and\x20overlay\x20bundle\x20into\x20a\x20public\x20directory','[Enhance\x20Overlay]','error','toString','now','\x20Module\x20exports:','./dist/index.cjs','sha256','\x20Enhancement\x20mode\x20ENABLED','origin','\x20composeOverlayState\x20-\x20state.controlled:\x20','\x20currentOptions\x20exists:\x20','^11.1.0','startsWith','\x20Installing\x20React\x20Refresh\x20runtime\x20from\x20','--filename\x20<name>','[Enhance\x20SW-Client]','\x20Found\x20cached\x20overlay\x20controller\x20on\x20window.__enhanceOverlay','createOverlay','\x20Sending\x20DISABLE\x20message\x20to\x20SW...','\x20loadOverlay()\x20called','prepare-sw','/sw-enhance.js','78bcchHo','runtimeURL','Directory\x20to\x20copy\x20the\x20service\x20worker\x20into','\x20state.enabled:\x20','disable','__enhanceReactRefreshInstalledOrigins','default','\x20init()\x20complete\x20-\x20normal\x20mode','enhancementUrl','__enhanceInitialized','\x20Loading\x20Vite\x20HMR\x20client\x20from\x20','dist','digest','\x20Failed\x20to\x20prepare\x20remote\x20HMR\x20(non-fatal):','@enhance-eng/sandbox','\x20Setting\x20up\x20remote\x20HMR...','sw-enhance','searchParams','\x20enhancementUrl:\x20','./dist/vite/index.d.ts','\x20Overlay\x20origin:\x20','Print\x20the\x20current\x20asset\x20manifest','\x20init()\x20complete\x20-\x20enhancement\x20mode','9ptRsld','__enhanceOptions','\x20URL\x20params\x20parsed:','^3.22.4','update','\x20First\x20initialization','./dist/index.js','...','\x20Already\x20initialized\x20(window.__enhanceInitialized=true)\x20-\x20returning\x20existing\x20controller','status','enhancement','all','\x20Normal\x20mode\x20-\x20no\x20enhancement\x20params','cwd','waiting','name','history','\x20Registering\x20SW\x20at\x20','add','\x20Controller\x20created:','has','replaceState','reload','onToggle','relativeDestination','callbackBypass','\x20Failed\x20to\x20unregister\x20service\x20worker:','override','\x20Raw\x20options:','N/A','injectIntoGlobalHook','\x20Setting\x20up\x20Vite\x20HMR\x20error\x20listeners','backendUrl','\x20Unregistering\x20any\x20existing\x20SW...','enableViteHmr','\x20Current\x20controller:','options','\x20Controller\x20already\x20exists\x20-\x20updating\x20overlay','some','scope'];_0x2dc2=function(){return _0x165455;};return _0x2dc2();}async function setupRemoteHMR(_0x291c89){const _0x52cb20=_0x3e6d1d;console[_0x52cb20(0x187)](LOG_PREFIX+'\x20setupRemoteHMR()\x20for\x20'+_0x291c89);if(typeof window===_0x52cb20(0x1a3))return;try{const _0x5c17c7=new URL(_0x291c89,window[_0x52cb20(0x19a)][_0x52cb20(0xd6)]),_0x2efde9=_0x5c17c7[_0x52cb20(0xd6)];console['log'](LOG_PREFIX+_0x52cb20(0xf8)+_0x2efde9+',\x20page\x20origin:\x20'+window[_0x52cb20(0x19a)][_0x52cb20(0xd6)]);if(_0x2efde9===window[_0x52cb20(0x19a)]['origin']){console[_0x52cb20(0x187)](LOG_PREFIX+_0x52cb20(0x168));return;}console[_0x52cb20(0x187)](LOG_PREFIX+'\x20Cross-origin\x20overlay\x20-\x20setting\x20up\x20HMR...'),await ensureReactRefreshPreamble(_0x2efde9),await ensureViteClient(_0x2efde9),console[_0x52cb20(0x187)](LOG_PREFIX+_0x52cb20(0x15b));}catch(_0x726b02){console['warn'](LOG_PREFIX+_0x52cb20(0xf1),_0x726b02);}}async function ensureReactRefreshPreamble(_0xbb9019){const _0x184b40=_0x3e6d1d;window[_0x184b40(0xe9)]??=new Set();if(window['__enhanceReactRefreshInstalledOrigins'][_0x184b40(0x10f)](_0xbb9019)){console[_0x184b40(0x187)](LOG_PREFIX+_0x184b40(0x16d)+_0xbb9019);return;}console[_0x184b40(0x187)](LOG_PREFIX+_0x184b40(0xdb)+_0xbb9019+_0x184b40(0x102));const _0x16e966=await import(_0xbb9019+_0x184b40(0xc0)),_0x21e4d7=_0x16e966&&typeof _0x16e966===_0x184b40(0x1a9)&&_0x184b40(0xea)in _0x16e966?_0x16e966['default']:_0x16e966;if(!isRefreshRuntime(_0x21e4d7)){console[_0x184b40(0x165)](LOG_PREFIX+'\x20Invalid\x20React\x20Refresh\x20runtime');return;}_0x21e4d7[_0x184b40(0x119)](window),window[_0x184b40(0x123)]=()=>{},window[_0x184b40(0x1b0)]=()=>_0x422b4a=>_0x422b4a,window[_0x184b40(0x176)]=!![],window[_0x184b40(0xe9)][_0x184b40(0x10d)](_0xbb9019),console[_0x184b40(0x187)](LOG_PREFIX+_0x184b40(0x184)+_0xbb9019);}async function ensureViteClient(_0x5c5b6f){const _0x567fe4=_0x3e6d1d;window[_0x567fe4(0x186)]??=new Set();if(window[_0x567fe4(0x186)][_0x567fe4(0x10f)](_0x5c5b6f)){console[_0x567fe4(0x187)](LOG_PREFIX+'\x20Vite\x20client\x20already\x20loaded\x20for\x20'+_0x5c5b6f);return;}console[_0x567fe4(0x187)](LOG_PREFIX+_0x567fe4(0xee)+_0x5c5b6f+_0x567fe4(0x102)),await import(_0x5c5b6f+_0x567fe4(0x158)),window['__viteHMRLoaded'][_0x567fe4(0x10d)](_0x5c5b6f),console[_0x567fe4(0x187)](LOG_PREFIX+_0x567fe4(0x12d)+_0x5c5b6f);}function isRefreshRuntime(_0x27f533){const _0x4b61f7=_0x3e6d1d;return typeof _0x27f533===_0x4b61f7(0x1a9)&&_0x27f533!==null&&_0x4b61f7(0x119)in _0x27f533&&typeof _0x27f533['injectIntoGlobalHook']==='function';}var WORKER_MESSAGE_CONFIG=_0x3e6d1d(0x178),WORKER_MESSAGE_DISABLE='enhance:disable',LOG_PREFIX2=_0x3e6d1d(0xdd),registration=null,currentOptions2=null;async function registerServiceWorker(_0x405138){const _0x2049d6=_0x3e6d1d;console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20registerServiceWorker()\x20called'),console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20swPath:\x20'+_0x405138[_0x2049d6(0x181)]);if(!(_0x2049d6(0x127)in navigator)){console[_0x2049d6(0x165)](LOG_PREFIX2+_0x2049d6(0x171));return;}console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0xbe));const _0x4cba35=navigator[_0x2049d6(0x127)][_0x2049d6(0x1b5)];console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x11e),_0x4cba35?.[_0x2049d6(0x151)]??_0x2049d6(0xc3)),console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x166),_0x4cba35?.[_0x2049d6(0x198)]??_0x2049d6(0x118));const _0x26e87f=!!_0x4cba35;currentOptions2=_0x405138,console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0xca));const _0x250e88=await detectBlockingServiceWorker(_0x405138['swPath']);if(_0x250e88){console['error'](LOG_PREFIX2+_0x2049d6(0x16e)+_0x250e88),console['error'](LOG_PREFIX2+_0x2049d6(0x140));return;}console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x16a));try{console['log'](LOG_PREFIX2+_0x2049d6(0x10c)+_0x405138[_0x2049d6(0x181)]+_0x2049d6(0x19d)),registration=await navigator[_0x2049d6(0x127)][_0x2049d6(0x162)](_0x405138['swPath'],{'scope':'/'}),console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x13e),{'scope':registration['scope'],'active':registration[_0x2049d6(0x144)]?.['scriptURL'],'waiting':registration[_0x2049d6(0x109)]?.[_0x2049d6(0x151)],'installing':registration['installing']?.[_0x2049d6(0x151)]}),console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20Waiting\x20for\x20navigator.serviceWorker.ready...');const _0x157e7c=await navigator[_0x2049d6(0x127)][_0x2049d6(0xbd)];console['log'](LOG_PREFIX2+_0x2049d6(0x15e),_0x157e7c[_0x2049d6(0x144)]?.[_0x2049d6(0x151)]);const _0xc8c81=ownsCurrentController(_0x405138[_0x2049d6(0x181)]);state[_0x2049d6(0x134)]=_0xc8c81,console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x14e)+_0xc8c81),console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20Current\x20controller\x20after\x20ready:',navigator[_0x2049d6(0x127)][_0x2049d6(0x1b5)]?.[_0x2049d6(0x151)]??_0x2049d6(0xc3));if(!_0x26e87f&&!navigator[_0x2049d6(0x127)][_0x2049d6(0x1b5)]){console['log'](LOG_PREFIX2+_0x2049d6(0x196)),window[_0x2049d6(0x19a)][_0x2049d6(0x111)]();return;}console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20Sending\x20customer\x20configuration...'),await sendConfiguration();if(state[_0x2049d6(0x125)]){const _0x2405cd=document[_0x2049d6(0x136)](_0x2049d6(0x145))!==null;console[_0x2049d6(0x187)](LOG_PREFIX2+'\x20Enhancement\x20detection:\x20wasEnhanced='+_0x2405cd);if(!_0x2405cd){console['log'](LOG_PREFIX2+_0x2049d6(0x161)),window[_0x2049d6(0x19a)][_0x2049d6(0x111)]();return;}}console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x19c)),updateOverlay(),console[_0x2049d6(0x187)](LOG_PREFIX2+_0x2049d6(0x16b));}catch(_0x1e8bb9){console[_0x2049d6(0xcf)](LOG_PREFIX2+'\x20Failed\x20to\x20register\x20service\x20worker:',_0x1e8bb9);}}async function sendConfiguration(){const _0x5f4d05=_0x3e6d1d;console['log'](LOG_PREFIX2+'\x20sendConfiguration()\x20called'),console['log'](LOG_PREFIX2+_0x5f4d05(0xe7)+state['enabled']+',\x20currentOptions:\x20'+!!currentOptions2);if(!state[_0x5f4d05(0x125)]||!currentOptions2){console[_0x5f4d05(0x187)](LOG_PREFIX2+_0x5f4d05(0x16f));return;}const _0x4cd1d8=await resolveWorker();if(!_0x4cd1d8){console['warn'](LOG_PREFIX2+_0x5f4d05(0x185));return;}const _0x1f100e={'callbackBypass':currentOptions2[_0x5f4d05(0x114)],'securityMode':currentOptions2[_0x5f4d05(0x191)]};console[_0x5f4d05(0x187)](LOG_PREFIX2+'\x20Sending\x20customer\x20config\x20to\x20SW:',JSON[_0x5f4d05(0x13d)](_0x1f100e,null,0x2)),_0x4cd1d8['postMessage']({'type':WORKER_MESSAGE_CONFIG,'config':_0x1f100e}),console[_0x5f4d05(0x187)](LOG_PREFIX2+_0x5f4d05(0x1a0));}async function unregisterServiceWorker(_0x145e9e){const _0x4149ef=_0x3e6d1d;console['log'](LOG_PREFIX2+_0x4149ef(0x156));if(!(_0x4149ef(0x127)in navigator)){console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0x18e));return;}try{const _0x471d08=registration??await navigator['serviceWorker'][_0x4149ef(0x14d)]('/');if(!_0x471d08){console[_0x4149ef(0x187)](LOG_PREFIX2+'\x20No\x20registration\x20found\x20-\x20nothing\x20to\x20unregister');return;}console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0x141),{'scope':_0x471d08[_0x4149ef(0x122)],'active':_0x471d08[_0x4149ef(0x144)]?.[_0x4149ef(0x151)],'waiting':_0x471d08['waiting']?.['scriptURL'],'installing':_0x471d08[_0x4149ef(0x18d)]?.[_0x4149ef(0x151)]});const _0x10e337=[_0x471d08[_0x4149ef(0x144)]?.[_0x4149ef(0x151)],_0x471d08[_0x4149ef(0x109)]?.[_0x4149ef(0x151)],_0x471d08[_0x4149ef(0x18d)]?.['scriptURL']],_0x23a415=_0x10e337[_0x4149ef(0x121)](_0x1531d9=>_0x1531d9&&ownsServiceWorker(_0x1531d9,_0x145e9e));if(!_0x23a415){console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0x19f));return;}_0x471d08[_0x4149ef(0x144)]&&(console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0xe0)),_0x471d08[_0x4149ef(0x144)]['postMessage']({'type':WORKER_MESSAGE_DISABLE})),console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0x152)),await _0x471d08[_0x4149ef(0x1a8)](),registration=null,currentOptions2=null,console[_0x4149ef(0x187)](LOG_PREFIX2+_0x4149ef(0x143));}catch(_0x330ba4){console['error'](LOG_PREFIX2+_0x4149ef(0x115),_0x330ba4);}}function ownsServiceWorker(_0x36f867,_0x584065){const _0x411d60=_0x3e6d1d,_0x118884=typeof window!==_0x411d60(0x1a3)?window[_0x411d60(0x19a)]['origin']:'',_0xa6b5ab=new URL(_0x584065,_0x118884||void 0x0)[_0x411d60(0x189)],_0x5e5d20=_0x36f867===_0xa6b5ab||_0x36f867[_0x411d60(0xc6)](_0x411d60(0xf4));return console[_0x411d60(0x187)](LOG_PREFIX2+_0x411d60(0x1a6)+_0x36f867+_0x411d60(0x15a)+_0xa6b5ab+_0x411d60(0x157)+_0x5e5d20),_0x5e5d20;}function ownsCurrentController(_0x3d05df){const _0x36b274=_0x3e6d1d;if(typeof navigator===_0x36b274(0x1a3))return![];const _0x56374d=navigator[_0x36b274(0x127)]?.[_0x36b274(0x1b5)];if(!_0x56374d)return console['log'](LOG_PREFIX2+'\x20No\x20current\x20controller'),![];return ownsServiceWorker(_0x56374d[_0x36b274(0x151)],_0x3d05df);}async function detectBlockingServiceWorker(_0x11af4b){const _0x3b6645=_0x3e6d1d;if(!navigator[_0x3b6645(0x127)])return null;try{const _0x83b535=await navigator[_0x3b6645(0x127)][_0x3b6645(0x14d)]('/');console[_0x3b6645(0x187)](LOG_PREFIX2+_0x3b6645(0x12e),_0x83b535?.[_0x3b6645(0x144)]?.['scriptURL']??_0x3b6645(0xc3));const _0x4fed2b=_0x83b535?.[_0x3b6645(0x144)]?.[_0x3b6645(0x151)];if(!_0x4fed2b)return null;if(ownsServiceWorker(_0x4fed2b,_0x11af4b))return null;return _0x4fed2b;}catch(_0x35759f){return console[_0x3b6645(0xcf)](LOG_PREFIX2+'\x20detectBlocking\x20error:',_0x35759f),null;}}async function resolveWorker(){const _0xacae26=_0x3e6d1d,_0x2cc745=registration??await navigator[_0xacae26(0x127)]?.[_0xacae26(0x14d)]('/'),_0xd846be=_0x2cc745?.[_0xacae26(0x144)]??_0x2cc745?.[_0xacae26(0x109)]??_0x2cc745?.[_0xacae26(0x18d)]??null;return console[_0xacae26(0x187)](LOG_PREFIX2+_0xacae26(0x129),_0xd846be?.['scriptURL']??'none','state:\x20'+(_0xd846be?.[_0xacae26(0x198)]??'N/A')),_0xd846be;}var LOG_PREFIX3=_0x3e6d1d(0x17c);function isInitialized(){const _0x3555a4=_0x3e6d1d;return typeof window!==_0x3555a4(0x1a3)&&window[_0x3555a4(0xed)]===!![];}function setInitialized(_0x47c2c5){const _0x115d20=_0x3e6d1d;typeof window!==_0x115d20(0x1a3)&&(window['__enhanceInitialized']=_0x47c2c5);}function getOptions(){const _0x15afa9=_0x3e6d1d;return typeof window!==_0x15afa9(0x1a3)?window[_0x15afa9(0xfc)]??null:null;}function setOptions(_0x2b20b5){const _0x1a6205=_0x3e6d1d;typeof window!==_0x1a6205(0x1a3)&&(window[_0x1a6205(0xfc)]=_0x2b20b5);}var Enhance={'init'(_0x2e9cdf){const _0x55b720=_0x3e6d1d,_0x596c51=Date[_0x55b720(0xd1)]();console[_0x55b720(0x187)](LOG_PREFIX3+'\x20init()\x20called\x20at\x20'+_0x596c51),console['log'](LOG_PREFIX3+_0x55b720(0x1b2)+window['location'][_0x55b720(0x189)]),console[_0x55b720(0x187)](LOG_PREFIX3+'\x20Document\x20readyState:\x20'+document[_0x55b720(0x170)]),console['log'](LOG_PREFIX3+_0x55b720(0x117),JSON[_0x55b720(0x13d)](_0x2e9cdf,null,0x2));if(isInitialized())return console[_0x55b720(0x165)](LOG_PREFIX3+_0x55b720(0x103)),window[_0x55b720(0xc7)]??createController();setInitialized(!![]),console['log'](LOG_PREFIX3+_0x55b720(0x100));const _0x4d55a1=normalizeOptions(_0x2e9cdf);setOptions(_0x4d55a1),console[_0x55b720(0x187)](LOG_PREFIX3+'\x20Normalized\x20options:',JSON['stringify'](_0x4d55a1,null,0x2));const _0x384590=parseUrlParams();console['log'](LOG_PREFIX3+_0x55b720(0xfd),JSON[_0x55b720(0x13d)](_0x384590,null,0x2));if(_0x384590[_0x55b720(0x175)])return cleanUrlParam(_0x55b720(0x174)),console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0x19e)),createController();if(_0x384590[_0x55b720(0xbb)])return console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0xd5)),console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0xf6)+_0x384590[_0x55b720(0xec)]),console['log'](LOG_PREFIX3+'\x20enhancementId:\x20'+_0x384590[_0x55b720(0x1ab)]),state[_0x55b720(0x125)]=!![],console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0xbf)),void loadOverlay({'overlayPath':_0x4d55a1[_0x55b720(0x1a1)],'enableViteHmr':_0x4d55a1[_0x55b720(0x137)][_0x55b720(0x11d)],'options':_0x4d55a1,'onToggle':handleToggle}),console[_0x55b720(0x187)](LOG_PREFIX3+'\x20Starting\x20SW\x20registration\x20(async)...'),void registerServiceWorker(_0x4d55a1),console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0xfa)),createController();return console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0x107)),console['log'](LOG_PREFIX3+_0x55b720(0x11c)),void unregisterServiceWorker(_0x4d55a1[_0x55b720(0x181)]),console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0xeb)),import.meta[_0x55b720(0x180)]&&(console[_0x55b720(0x187)](LOG_PREFIX3+_0x55b720(0x11a)),import.meta['hot']['on']('vite:error',_0x487e13=>{const _0x386c9c=_0x55b720;console['log'](LOG_PREFIX3+_0x386c9c(0x1ae),_0x487e13),state['appError']={'message':_0x487e13[_0x386c9c(0x14f)][_0x386c9c(0x183)]},updateOverlay();}),import.meta[_0x55b720(0x180)]['on'](_0x55b720(0x1b1),()=>{const _0x1717bd=_0x55b720;state[_0x1717bd(0xc1)]&&(console['log'](LOG_PREFIX3+_0x1717bd(0x1b4)),state[_0x1717bd(0xc1)]=null,updateOverlay());})),createController();}};function createController(){const _0x409ac9=_0x3e6d1d,_0x53ddee={'enable'(){const _0x55e762=_0x2413,_0x14cbfd=getOptions();if(!_0x14cbfd)return;state[_0x55e762(0x125)]=!![],void loadOverlay({'overlayPath':_0x14cbfd[_0x55e762(0x1a1)],'enableViteHmr':_0x14cbfd['overlay']['enableViteHmr'],'options':_0x14cbfd,'onToggle':handleToggle}),void registerServiceWorker(_0x14cbfd),void sendConfiguration(),updateOverlay();},'disable'(){const _0x15ec19=_0x2413,_0x2d9fb4=getOptions();if(!_0x2d9fb4)return;state['enabled']=![],state[_0x15ec19(0x134)]=![],updateOverlay(),void unregisterServiceWorker(_0x2d9fb4['swPath']);},'status'(){const _0x516d26=_0x2413;return{'enabled':state[_0x516d26(0x125)],'controlled':state[_0x516d26(0x134)]};}};return typeof window!==_0x409ac9(0x1a3)&&(window['__enhanceController']=_0x53ddee),_0x53ddee;}function handleToggle(){const _0x244e39=_0x3e6d1d,_0x373731=createController();state[_0x244e39(0x125)]?_0x373731[_0x244e39(0xe8)]():_0x373731['enable']();}function parseUrlParams(){const _0x3eba12=_0x3e6d1d,_0x51c020=new URL(window[_0x3eba12(0x19a)][_0x3eba12(0x189)]),_0x505129=_0x51c020['searchParams'][_0x3eba12(0xcb)](_0x3eba12(0x174))?.[_0x3eba12(0x138)](),_0x42d5a5=_0x51c020[_0x3eba12(0xf5)][_0x3eba12(0xcb)](_0x3eba12(0xec)),_0x2fc509=_0x51c020[_0x3eba12(0xf5)]['get'](_0x3eba12(0x105));return{'hasEnhancement':Boolean(_0x42d5a5||_0x2fc509),'explicitDisable':_0x505129==='0'||_0x505129===_0x3eba12(0x160)||_0x505129===_0x3eba12(0x146),'enhancementUrl':_0x42d5a5,'enhancementId':_0x2fc509};}function cleanUrlParam(_0x2e61f3){const _0x5a3d03=_0x3e6d1d,_0x243b5f=new URL(window[_0x5a3d03(0x19a)][_0x5a3d03(0x189)]);_0x243b5f[_0x5a3d03(0xf5)][_0x5a3d03(0x10f)](_0x2e61f3)&&(_0x243b5f[_0x5a3d03(0xf5)][_0x5a3d03(0x1a5)](_0x2e61f3),window[_0x5a3d03(0x10b)][_0x5a3d03(0x110)](null,document[_0x5a3d03(0x12c)],_0x243b5f[_0x5a3d03(0xd0)]()));}var package_default={'name':_0x3e6d1d(0xf2),'version':'0.3.19','type':'module','description':_0x3e6d1d(0x132),'license':_0x3e6d1d(0x1b7),'main':_0x3e6d1d(0xd3),'module':'./dist/index.js','types':_0x3e6d1d(0x130),'exports':{'.':{'types':_0x3e6d1d(0x130),'import':_0x3e6d1d(0x101),'require':'./dist/index.cjs'},'./vite':{'types':_0x3e6d1d(0xf7),'import':_0x3e6d1d(0x182)}},'files':[_0x3e6d1d(0xef),_0x3e6d1d(0x133),_0x3e6d1d(0x17b)],'bin':{'enhance-sandbox':_0x3e6d1d(0x154)},'scripts':{'typecheck':_0x3e6d1d(0x149),'dev':_0x3e6d1d(0x17e),'dev:build':'ENHANCE_OVERLAY_PATH=https://overlay.localhost:8099/src/index.tsx\x20ENHANCE_BACKEND_URL=https://overlay.localhost:8099\x20tsup','dev:staging':_0x3e6d1d(0x18b),'dev:staging:build':_0x3e6d1d(0x153),'build':_0x3e6d1d(0xc2),'build:release':_0x3e6d1d(0xc9),'version':_0x3e6d1d(0x190)},'dependencies':{'commander':_0x3e6d1d(0xd9),'zod':_0x3e6d1d(0xfe)},'devDependencies':{'@types/node':_0x3e6d1d(0x17a),'javascript-obfuscator':'^4.1.1','tsup':'^8.5.1','vite':_0x3e6d1d(0x14c)},'publishConfig':{'access':'public'}},DEFAULT_SERVICE_WORKER_PATH='/sw-enhance.js',DEFAULT_RUNTIME_PATH='/assets/enhance-runtime.js',DIST_SERVICE_WORKER_PATH=_0x3e6d1d(0x15f),DIST_RUNTIME_PATH=_0x3e6d1d(0x13c),PACKAGE_VERSION=typeof package_default['version']==='string'?package_default[_0x3e6d1d(0x1ac)]:_0x3e6d1d(0x1af);function normalizeAssetPath(_0x238fe3){const _0xf1696=_0x3e6d1d;if(!_0x238fe3)return _0x238fe3;if(_0x238fe3[_0xf1696(0xda)](_0xf1696(0x194))||_0x238fe3['startsWith'](_0xf1696(0x12a)))return _0x238fe3;const _0x2147be=_0x238fe3[_0xf1696(0x18a)](/^\.\//,'');return _0x2147be['startsWith']('/')?_0x2147be:'/'+_0x2147be;}var defaultSwPath=normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),defaultRuntimePath=normalizeAssetPath(DEFAULT_RUNTIME_PATH),Enhance2={'init'(_0x21b76e){const _0x1422df=_0x3e6d1d;return Enhance[_0x1422df(0x124)](_0x21b76e);},'serviceWorkerURL'(){return defaultSwPath;},'runtimeURL'(){return defaultRuntimePath;},'assetManifest'(){return getAssetManifest();}};function getAssetManifest(){return{'version':PACKAGE_VERSION,'serviceWorker':serviceWorkerURL(),'runtime':runtimeURL(),'serviceWorkerDigest':null,'runtimeDigest':null};}function serviceWorkerURL(){return Enhance2['serviceWorkerURL']();}function runtimeURL(){const _0x2885fe=_0x3e6d1d;return Enhance2[_0x2885fe(0xe5)]();}import{promises as _0x1f26fc}from'fs';import{createHash}from'crypto';import{dirname,join}from'path';import{fileURLToPath}from'url';var distDir=dirname(fileURLToPath(new URL('../dist/index.js',import.meta[_0x3e6d1d(0x13a)])));async function syncAssets(_0xab22ff){const _0x276dae=_0x3e6d1d,_0x5b274b=[{'sourcePath':DIST_SERVICE_WORKER_PATH,'manifestPath':normalizeAssetPath(DEFAULT_SERVICE_WORKER_PATH),'override':_0xab22ff[_0x276dae(0x147)]?'./'+_0xab22ff['swFilename']:void 0x0},{'sourcePath':DIST_RUNTIME_PATH,'manifestPath':normalizeAssetPath(DEFAULT_RUNTIME_PATH)}],_0x504f98=[];for(const _0x1c0fda of _0x5b274b){const _0x3c7365=cleanRelativePath(_0x1c0fda[_0x276dae(0x116)]??_0x1c0fda[_0x276dae(0x18c)]),_0x33f579=join(distDir,cleanRelativePath(_0x1c0fda[_0x276dae(0x1b3)])),_0x2414c8=join(_0xab22ff[_0x276dae(0x14b)],_0x3c7365),[_0x3eac80,_0x2d9969]=await Promise[_0x276dae(0x106)]([readDigest(_0x33f579),readDigest(_0x2414c8)]);if(_0x3eac80&&_0x2d9969&&_0x3eac80===_0x2d9969){_0x504f98['push']({'sourcePath':_0x33f579,'destinationPath':_0x2414c8,'relativeDestination':_0x3c7365,'status':_0x276dae(0x17f)});continue;}await _0x1f26fc['mkdir'](dirname(_0x2414c8),{'recursive':!![]}),await _0x1f26fc['copyFile'](_0x33f579,_0x2414c8),_0x504f98['push']({'sourcePath':_0x33f579,'destinationPath':_0x2414c8,'relativeDestination':_0x3c7365,'status':_0x276dae(0x126)});}return _0x504f98;}function cleanRelativePath(_0x21f57e){return _0x21f57e['replace'](/^[./]+/,'');}async function readDigest(_0x2d4aa6){const _0x31f0b7=_0x3e6d1d;try{const _0x3d2808=await _0x1f26fc['readFile'](_0x2d4aa6);return createHash(_0x31f0b7(0xd4))[_0x31f0b7(0xff)](_0x3d2808)[_0x31f0b7(0xf0)](_0x31f0b7(0x177));}catch(_0x41f1be){if(_0x41f1be['code']==='ENOENT')return null;throw _0x41f1be;}}var program=new Command();program[_0x3e6d1d(0x10a)]('enhance-sandbox')[_0x3e6d1d(0x173)](_0x3e6d1d(0x14a))[_0x3e6d1d(0x1ac)]('0.0.0'),program[_0x3e6d1d(0x13b)]('manifest')[_0x3e6d1d(0x173)](_0x3e6d1d(0xf9))[_0x3e6d1d(0x167)](()=>{const _0x586ced=_0x3e6d1d,_0x55c81d=getAssetManifest();process[_0x586ced(0x148)][_0x586ced(0x12b)](JSON[_0x586ced(0x13d)](_0x55c81d,null,0x2)+'\x0a');}),program['command'](_0x3e6d1d(0xe2))[_0x3e6d1d(0x173)](_0x3e6d1d(0xcd))[_0x3e6d1d(0x1bb)]('--public-dir\x20<path>',_0x3e6d1d(0xe6))['option'](_0x3e6d1d(0xdc),'Override\x20the\x20service\x20worker\x20output\x20filename\x20(defaults\x20to\x20sw-enhance.js)')[_0x3e6d1d(0x167)](async _0x853f78=>{const _0x31ec8b=_0x3e6d1d,_0x280871=resolve(process[_0x31ec8b(0x108)](),_0x853f78['publicDir']),_0x43ad2a=await syncAssets({'publicDir':_0x280871,'swFilename':_0x853f78[_0x31ec8b(0x15d)]});for(const _0xd6f3dc of _0x43ad2a){const _0x27b5be=relative(process['cwd'](),_0xd6f3dc[_0x31ec8b(0x1aa)]);_0xd6f3dc[_0x31ec8b(0x104)]===_0x31ec8b(0x17f)?process['stdout'][_0x31ec8b(0x12b)]('Skipped\x20'+_0xd6f3dc[_0x31ec8b(0x113)]+_0x31ec8b(0x179)+_0x27b5be+']\x0a'):process['stdout'][_0x31ec8b(0x12b)](_0x31ec8b(0xbc)+_0xd6f3dc[_0x31ec8b(0x113)]+'\x20â†’\x20'+_0x27b5be+'\x0a');}}),program[_0x3e6d1d(0x18f)]();